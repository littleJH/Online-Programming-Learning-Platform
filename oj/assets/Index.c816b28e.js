import{_ as e,t,a as o,d as s,j as r,F as i,cf as a}from"./index.5c064301.js";import{a as d,g as c}from"./problemNew.e9465bc1.js";import{g as n}from"./competitionMixture.e039dd24.js";import{r as p}from"./recordStates.a45efd0a.js";import{M as m}from"./MyTag.a4f82d92.js";import l from"./Answer.081f5f71.js";import{M as j}from"./MyCollapse.32cc964b.js";import{a as f,i as u}from"./competitionStore.2ce7a0b2.js";import"./useClosable.e9e9bb76.js";import"./context.aa52cc0c.js";import"./CodeEditor.4571c3ba.js";import"./chatGpt.0470686f.js";import"./LanguageList.5e03f3ce.js";import"./CodeEditorConfig.c1285810.js";import"./index.0c9dd83b.js";import"./row.e491f7a6.js";import"./useLocale.07149357.js";import"./index.a45f76a6.js";import"./List.6e377c69.js";import"./PurePanel.bec90387.js";import"./index.4e624168.js";import"./CheckOutlined.363c4795.js";import"./index.7aeb2011.js";import"./UpOutlined.722986ed.js";import"./BaseInput.01760c9b.js";import"./index.05a8036e.js";import"./problem.1496b552.js";import"./index.699f9875.js";import"./Dropdown.acaf0b68.js";import"./index.6891d53f.js";import"./ActionButton.76c967e9.js";import"./fade.9766c3a1.js";import"./SwapRightOutlined.64619f65.js";import"./index.4071f4af.js";import"./index.7d75d2c2.js";import"./ProblemDetail.6497c667.js";import"./Readonly.a9ebc692.js";import"./index.4cc837d4.js";import"./style.module.af136287.js";import"./Table.f08b7a7b.js";import"./index.ec27075f.js";import"./index.4d9ca8d6.js";import"./Pagination.855f4d50.js";import"./index.9225dd62.js";import"./Skeleton.ed2cb458.js";import"./PlusOutlined.787b1bb7.js";import"./style.module.9ce82fca.js";import"./Collapse.6714be34.js";const b=s=>{const[r,i]=e.exports.useState();return t.useToken(),e.exports.useLayoutEffect((()=>{if(0===s.records.length)i(o(m,{type:"Info",children:"未提交"}));else{let e="unAccepted";switch(s.records.forEach(((t,o)=>{p.forEach(((o,s)=>{o.value===t.condition&&"success"===o.state&&(e="accepted")}))})),e){case"unAccepted":i(o(m,{type:"Warning",children:"未通过"}));break;case"accepted":i(o(m,{type:"Success",children:"已通过"}))}}}),[s]),o("div",{className:"w-full flex justify-center",children:r})},x=()=>{const p=s(f),m=s(u),[x,y]=e.exports.useState([]),{token:h}=t.useToken();e.exports.useEffect((()=>{p&&m&&w()}),[p,m]);const g=e.exports.useMemo((()=>x?x.map(((e,t)=>({key:e.key,label:e.title,children:o(l,{problem_id:e.key,onSubmited:e=>C(e),onStateChange:e=>k(e,t)}),extra:e.state,style:{marginBottom:24,background:h.colorFillAlter,borderRadius:h.borderRadiusLG,border:"none"}}))):null),[x]),k=(e,t)=>{x[t]},w=async()=>{if(!p)return;const e=(await d(p.id)).data.data.problemIds;for(let t of e){const e=await c(t),s=await n(p.type,p.id,{problem_id:t}),r=e.data.data.problem,i=s.data.data.records;y((e=>[...e,{key:t,index:e.length?e[e.length-1].index+1:1,score:"",title:r.title,state:o(b,{problem:r,records:i})}]))}},C=async e=>{if(!p)return;const t=x.findIndex((t=>t.key===e));try{const s=await n(null==p?void 0:p.type,null==p?void 0:p.id,{problm_id:e});y((e=>[...e.slice(0,t),{...e[t],state:o(b,{problem:e[t],records:s.data.data.records})},...e.slice(t+1)]))}catch{}};return r(i,{children:[!g&&o(a,{}),g&&g.length>0&&o(j,{items:g,onChange:e=>{}})]})};export{x as default};
