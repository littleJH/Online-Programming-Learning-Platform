import{d as e,i as t,cl as s,_ as a,n as o,j as i,a as r,l as d,bJ as m}from"./index.5c064301.js";import{g as l}from"./problemNew.e9465bc1.js";import{C as n,R as c,c as p}from"./CodeEditor.4571c3ba.js";import{T as u}from"./index.7d75d2c2.js";import{d as j}from"./competitionMixture.e039dd24.js";import{a as f}from"./competitionStore.2ce7a0b2.js";import{P as b}from"./ProblemDetail.6497c667.js";import{s as x}from"./style.module.9ce82fca.js";import{S as g}from"./index.05a8036e.js";import"./recordStates.a45efd0a.js";import"./chatGpt.0470686f.js";import"./LanguageList.5e03f3ce.js";import"./CodeEditorConfig.c1285810.js";import"./index.0c9dd83b.js";import"./context.aa52cc0c.js";import"./row.e491f7a6.js";import"./useLocale.07149357.js";import"./index.a45f76a6.js";import"./List.6e377c69.js";import"./PurePanel.bec90387.js";import"./index.4e624168.js";import"./CheckOutlined.363c4795.js";import"./index.7aeb2011.js";import"./UpOutlined.722986ed.js";import"./BaseInput.01760c9b.js";import"./problem.1496b552.js";import"./index.699f9875.js";import"./Dropdown.acaf0b68.js";import"./index.6891d53f.js";import"./ActionButton.76c967e9.js";import"./useClosable.e9e9bb76.js";import"./fade.9766c3a1.js";import"./SwapRightOutlined.64619f65.js";import"./index.4071f4af.js";import"./Readonly.a9ebc692.js";import"./index.4cc837d4.js";import"./style.module.af136287.js";import"./Table.f08b7a7b.js";import"./index.ec27075f.js";import"./index.4d9ca8d6.js";import"./Pagination.855f4d50.js";import"./index.9225dd62.js";import"./Skeleton.ed2cb458.js";import"./PlusOutlined.787b1bb7.js";const h={value:"",label:"待运行",state:"info"},S=S=>{var v;const y=e(t);s();const C=e(f),{problem_id:k,onStateChange:w,onSubmited:N}=S,[R,_]=a.exports.useState(),[O,P]=a.exports.useState([]),[z,E]=a.exports.useState("");a.exports.useState(!1);const[L,I]=a.exports.useState(!1),[J,T]=a.exports.useState("test"),[B,D]=a.exports.useState(""),[$,A]=a.exports.useState({}),[G,K]=a.exports.useState(h),M=e(o),U=a.exports.useRef(null);a.exports.useEffect((()=>{V(),window.addEventListener("resize",(()=>{}))}),[]),a.exports.useEffect((()=>{w({code:z,runResult:$,currentState:G})}),[z,$,G]);const V=async()=>{var e;E(localStorage.getItem(`code-${k}`)||"");const t=await l(k);_(t.data.data.problem),D(null==(e=t.data.data.caseSamples[0])?void 0:e.input);const s=t.data.data.caseSamples.map((e=>({...e,key:String(e.cid)})));P(s)},q=()=>{setTimeout((()=>{U.current&&U.current.scrollIntoView({behavior:"smooth"})}),0)};return i("div",{className:x.answer,children:[R&&r(b,{mode:"competition",problem:R,caseSamples:O}),r("div",{className:"pt-4",children:r(n,{value:z,height:y?300:500,codeChange:e=>{localStorage.setItem(`code-${k}`,e),E(e)}})}),i("div",{className:"flex items-center py-1",children:[r("div",{className:"flex-grow my-4",onClick:q,children:r(g,{checkedChildren:"控制台",unCheckedChildren:"控制台",checked:L,onChange:e=>I(e)})}),i("div",{className:"",children:[r(d,{size:"small",onClick:()=>{(()=>{K({value:"Running",label:"运行中",state:"info"}),I(!0),T("result");const e={language:"C++11",code:z,input:B,time_limit:null==R?void 0:R.time_limit,memory_limit:null==R?void 0:R.memory_limit};p(JSON.stringify(e)).then((e=>{A(e.data.data)}))})(),q()},children:"执行代码"}),r(d,{size:"small",onClick:async()=>{if(!C)return;const e={language:"C++11",code:z,problem_id:k};try{const t=await j(C.type,C.id,JSON.stringify(e));200!==t.data.code||"未报名"===t.data.msg?M&&M.error({message:t.data.msg}):(N(k),M&&M.success({message:t.data.msg}))}catch{}},className:"mx-1",type:"primary",children:"提交"})]})]}),L&&i("div",{className:" border border-solid border-slate-300 rounded",children:[r(m,{selectedKeys:[J],style:{padding:"0",height:"3rem"},mode:"horizontal",items:[{label:"测试用例",key:"test"},{label:"执行结果",key:"result"}],onClick:e=>{T(e.key),q()}}),r("div",{className:"w-full",children:i("div",{className:"p-4",children:["test"===J&&r(u,{value:B,autoSize:{minRows:3},onChange:e=>D(e.target.value)}),"result"===J&&r(c,{caseSample:{input:B,output:null==(v=O[0])?void 0:v.output},runResult:$,currentState:G,setcurrentState:K})]})})]}),r("div",{ref:U})]})};export{S as default};
