import{_ as e,cn as t,a,j as i,l as r,aY as o,bS as n,bJ as s,U as l,d as c,n as d,S as m,F as u,bl as p,bF as h,o as f,e as g,w as v,t as b,i as y,m as x,cb as w,cc as N,bM as k,bG as S,M as j,bw as C,cf as _,D as I,bE as M}from"./index.5c064301.js";import{u as F,d as O,c as E}from"./competition.7cff66b2.js";import{e as L,a as Y,b as z,c as H}from"./competitionMixture.e039dd24.js";import{T as D}from"./TextEditor.53774050.js";import{F as T}from"./index.0c9dd83b.js";import{I as q}from"./index.7d75d2c2.js";import{I as R}from"./index.7aeb2011.js";import{S as $}from"./index.05a8036e.js";import{D as A}from"./index.75d3f4b2.js";import{R as P,C as B}from"./row.e491f7a6.js";import{d as V,q as J}from"./problemNew.e9465bc1.js";import{s as U,k as G}from"./problem.1496b552.js";import{P as K}from"./ProblemNew.e38b9fe8.js";import{R as W}from"./Readonly.a9ebc692.js";import{S as Z}from"./index.a45f76a6.js";import{L as Q}from"./index.0ec24622.js";import{M as X}from"./MinusCircleOutlined.59c26db9.js";import{M as ee}from"./index.6891d53f.js";import{a as te,s as ae,b as ie,i as re,d as oe,e as ne,f as se,g as le}from"./group.ab80a5d7.js";import{C as ce}from"./CreateGroupForm.513a2dca.js";import{S as de}from"./index.59b8fbad.js";import{R as me}from"./index.4071f4af.js";import{M as ue}from"./MyAvatar.22457dcc.js";import{P as pe}from"./PlusOutlined.787b1bb7.js";import{D as he}from"./index.972659d0.js";import{c as fe,a as ge,i as ve}from"./competitionStore.2ce7a0b2.js";import{s as be}from"./style.module.9ce82fca.js";import"./index.4cc837d4.js";import"./context.aa52cc0c.js";import"./useLocale.07149357.js";import"./index.4e624168.js";import"./BaseInput.01760c9b.js";import"./UpOutlined.722986ed.js";import"./PurePanel.bec90387.js";import"./SwapRightOutlined.64619f65.js";import"./program.7335cc1e.js";import"./chatGpt.0470686f.js";import"./LanguageList.5e03f3ce.js";import"./CodeEditorConfig.c1285810.js";import"./Highlight.c2b7293d.js";import"./recordStates.a45efd0a.js";import"./index.699f9875.js";import"./Dropdown.acaf0b68.js";import"./index.4d9ca8d6.js";import"./Table.f08b7a7b.js";import"./List.6e377c69.js";import"./index.ec27075f.js";import"./Pagination.855f4d50.js";import"./CheckOutlined.363c4795.js";import"./ActionButton.76c967e9.js";import"./useClosable.e9e9bb76.js";import"./fade.9766c3a1.js";import"./progress.2cf02846.js";const ye=o=>{const{competition:n,setcompetition:s}=o,{RangePicker:l}=A,[c]=T.useForm(),[d,m]=e.exports.useState(!1),[u,p]=e.exports.useState(!1),h=[t(null==n?void 0:n.start_time),t(null==n?void 0:n.end_time)];e.exports.useEffect((()=>{c.setFieldsValue(n),c.setFieldValue("timeRange",h);const e=t(null==n?void 0:n.hack_time).unix()-t(null==n?void 0:n.end_time).unix();c.setFieldValue("hack_time",e>=0?e:0)}),[n]);return a("div",{className:"",children:i(T,{size:"large",scrollToFirstError:!0,name:"problemForm",form:c,onFinish:()=>{const e={...n},a=c.getFieldsValue();Object.keys(a).forEach((i=>{"timeRange"===i?(e.start_time=t(a[i][0]).format("YYYY-MM-DD HH:mm:ss"),e.end_time=t(a[i][1]).format("YYYY-MM-DD HH:mm:ss")):"hack_time"===i?e.hack_time=t(e.end_time).add(a[i],"minute").format("YYYY-MM-DD HH:mm:ss"):e[i]=a[i]})),delete e.id,delete e.passwd_id,delete e.type,delete e.created_at,delete e.updated_at,delete e.user_id,F(null==n?void 0:n.id,JSON.stringify(e)).then((e=>{s(e.data.data.competition)}))},layout:"vertical",children:[a(T.Item,{name:"title",label:"标题",required:!0,rules:[{required:!0}],children:a(q,{})}),u&&a(T.Item,{noStyle:!0,children:i(P,{gutter:16,children:[a(B,{children:a(T.Item,{name:"less_num",label:"人数下限",rules:[{required:!0}],children:a(R,{min:1})})}),a(B,{children:a(T.Item,{name:"up_num",label:"人数上限",dependencies:["less_num"],rules:[{required:!0}],children:a(R,{})})})]})}),a(T.Item,{name:"timeRange",label:"比赛时间",rules:[{required:!0}],children:a(l,{defaultValue:h,showTime:{format:"HH:mm"},format:"YYYY-MM-DD HH:mm",onChange:(e,a)=>{c.setFieldValue("timeRange",[t(a[0]),t(a[1])])}})}),a(T.Item,{name:"content",label:"描述",required:!0,rules:[{required:!0}],children:a(D,{defaultHtml:null==n?void 0:n.content,htmlChange:e=>((e,t)=>{c.setFieldValue(t,JSON.stringify(e))})(e,"content")})}),a(T.Item,{label:"Hack",children:a($,{onChange:e=>m(e)})}),d&&a(T.Item,{noStyle:!0,children:i(P,{gutter:16,children:[a(B,{span:6,children:a(T.Item,{name:"hack_time",label:"Hack时长",rules:[{required:!0}],children:a(R,{min:0,addonAfter:"min"})})}),a(B,{children:a(T.Item,{name:"hack_score",label:"Hack分数",tooltip:a("span",{children:"黑客成功后的奖励分数"}),rules:[{required:!0}],children:a(R,{})})}),a(B,{children:a(T.Item,{name:"hack_num",label:"Hack次数",tooltip:a("span",{children:"最多可以获得分数的黑客次数"}),rules:[{required:!0}],children:a(R,{})})})]})}),a("div",{className:"w-full flex justify-center",children:a(r,{htmlType:"submit",type:"primary",children:"保存"})})]})})};let xe,we;const Ne=t=>{const{competition:s}=t,[l,c]=e.exports.useState([]),[d,m]=e.exports.useState(!1),[u,p]=e.exports.useState([]),[h,f]=e.exports.useState(),[g,v]=e.exports.useState(!1);e.exports.useEffect((()=>{}),[s]);const b=(e,t)=>{var a,i;a=l[t].id,i=e,J(null==s?void 0:s.id,a,i).then((e=>{200===e.data.code?n.success({message:e.data.msg}):n.warning({message:e.data.msg})})),c((a=>(a[t].score=String(e),a)))};return i("div",{className:"w-full",children:[a(Z,{size:"large",showSearch:!0,mode:"multiple",value:h,placeholder:"Search problem ...",defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,onSearch:e=>{((e,t)=>{we&&(clearTimeout(we),we=null),xe=e,e?we=setTimeout((()=>{G(e).then((a=>{if(a.data.data.problems){if(xe===e){const e=a.data.data.problems.map(((e,t)=>({value:e.title,label:e.title,key:e.id})));t(e)}}else t([])}))}),300):t([])})(e,p)},onChange:e=>f(e),onSelect:e=>{U(e.key).then((e=>{c((t=>[...t,{id:e.data.data.problem.id,score:"1",title:e.data.data.problem.title,description:e.data.data.problem.description}]))}))},className:"w-full",labelInValue:!0,notFoundContent:d?a(o,{size:"small"}):null,options:u,autoFocus:!0}),a(Q,{style:{width:"100%"},itemLayout:"horizontal",dataSource:l,renderItem:(t,o)=>a(e.exports.Fragment,{children:i(Q.Item,{actions:[a(r,{type:"text",danger:!0,shape:"circle",onClick:()=>(e=>{c((t=>[...t.slice(0,e),...t.slice(e+1)])),V(l[e].id).then((e=>{}))})(o),icon:a(X,{})})],children:[a(Q.Item.Meta,{title:t.title,description:a(W,{html:t.description})}),i("div",{className:"",children:[a("span",{children:"分数："}),a(R,{onChange:e=>b(e,o)})]})]})})}),a("div",{className:"w-full flex justify-end",children:a(r,{onClick:()=>{v(!0)},children:"创建赛内题目"})}),g&&a(K,{open:g,setisModelOpen:v})]})},ke=t=>{const{competition:r,setcompetition:o,openUpdateModal:n,setopenUpdateModal:l}=t,[c,d]=e.exports.useState("competition");return a("div",{children:i(ee,{width:800,title:"修改比赛",open:n,onCancel:()=>l(!1),footer:[],children:[a(s,{selectedKeys:[c],mode:"horizontal",items:[{key:"competition",label:a("div",{onClick:()=>{d("competition")},children:"比赛信息"})},{key:"problem",label:a("div",{onClick:()=>{d("problem")},children:"题目列表"})}]}),"competition"===c&&a(ye,{competition:r,setcompetition:o}),"problem"===c&&a(Ne,{competition:r})]})})},Se={label:"_label_1itcg_1"},je=e=>{var t;const{group:r}=e;return i("div",{className:"flex flex-col items-start max-w-max",style:{fontWeight:400},children:[i("p",{children:[a("span",{className:Se.label,children:"小组名："}),a("span",{className:Se.value,children:r.title})]}),i("p",{children:[a("span",{className:Se.label,children:"小组id: "}),a("span",{className:Se.value,children:r.id})]}),i("p",{children:[a("span",{className:Se.label,children:"小组描述: "}),a("span",{className:Se.value,children:r.content})]}),i("p",{children:[a("span",{className:Se.label,children:"自动通过用户申请: "}),a("span",{className:Se.value,children:r.auto?"是":"否"})]}),i("p",{children:[a("span",{className:Se.label,children:"组长id: "}),a("span",{className:Se.value,children:r.leader_id})]}),i("p",{children:[a("span",{className:Se.label,children:"比赛结束时间: "}),a("span",{className:Se.value,children:r.competition_at})]}),i("p",{children:[a("span",{className:Se.label,children:"创建于: "}),a("span",{className:Se.value,children:r.created_at})]}),(null==r?void 0:r.members)&&i("div",{children:[a("p",{children:"小组成员："}),null==(t=r.members)?void 0:t.map((e=>a(l,{user:e},e.id)))]})]})},Ce=t=>{const[o]=T.useForm(),{competition:n,type:s,onEnterSuccess:l}=t,[h,f]=e.exports.useState(0),[g,v]=e.exports.useState("undetermined"),[b,y]=e.exports.useState(""),[x,w]=e.exports.useState({}),[N,k]=e.exports.useState([]),[S,j]=e.exports.useState(""),[C,_]=e.exports.useState(""),[I,M]=e.exports.useState(""),F=c(d);e.exports.useEffect((()=>{let e="";switch(g){case"create":e="创建用户组";break;case"enter":e="加入用户组";break;case"already":e="已有用户组"}y(e)}),[g]),e.exports.useEffect((()=>{0===h&&v("undetermined"),j(""),k([]),M("")}),[h]),e.exports.useEffect((()=>{I&&z()}),[I]);const O=e=>{let t="";switch(g){case"create":t=x.id;break;case"already":t=N[e].group.id}L(s,null==n?void 0:n.id,JSON.stringify({passwd_id:" "}),t).then((t=>{200===t.data.code?(F&&F.success({message:t.data.msg}),e>=0&&(w(N[e].group),l(N[e].group)),f((e=>e+1))):F&&F.warning({message:t.data.msg})}))},E=e=>{if("Enter"===e.code)switch(g){case"enter":Y();break;case"already":z()}},Y=()=>{k([]),ae(S).then((e=>{const t=e.data.data.groups;k(t.map((e=>({key:e.id,group:e}))))}))},z=()=>{k([]),te(I).then((e=>{if(200===e.data.code){const t=e.data.data.group;k([{key:t.id,group:t}])}}))};return i("div",{children:[a(de,{className:"py-8 px-16",current:h,items:[{title:""},{title:b},{title:2===h?"报名成功":""}]}),0===h&&a("div",{className:"flex justify-center",children:i(m,{children:[a(r,{onClick:()=>{v("create"),f((e=>e+1))},children:"创建用户组"}),a(r,{onClick:()=>{v("enter"),f((e=>e+1))},children:"加入用户组"}),a(r,{onClick:()=>{v("already"),f((e=>e+1))},children:"已有用户组"})]})}),1===h&&"create"===g&&a(ce,{form:o,doneCallback:e=>{w(e),f((e=>e+1))},preFooter:[a(r,{onClick:()=>f(0),children:"上一步"})]}),1===h&&"enter"===g&&i("div",{children:[a("div",{children:i("div",{className:"searchInput flex",children:[a(q,{size:"large",autoFocus:!0,placeholder:"搜索用户组",onKeyDown:e=>{E(e)},value:S,onChange:e=>j(e.target.value),className:"border-0 border-b border-slate-500"}),a("svg",{className:"icon ml-4 hover:cursor-pointer ",onClick:Y,children:a("use",{href:"#icon-search"})})]})}),N.length>0&&a(_e,{groupList:N,callBack:e=>{const t={content:C};ie(N[e].group.id,JSON.stringify(t)).then((t=>{200===t.data.code?(F&&F.success({message:t.data.msg}),w(N[e].group),f((e=>e+1))):F&&F.warning({message:t.data.msg})}))},extra:"申请加入"}),a(m,{className:"flex justify-center mt-8",children:a(r,{onClick:()=>{f(0)},children:"上一步"})})]}),1===h&&"already"===g&&i(u,{children:[i("div",{className:"flex items-center",children:[a(q,{placeholder:"请输入用户组的id",value:I,onChange:e=>M(e.target.value),onKeyDown:E}),a("span",{className:"px-4",children:"或"}),a(r,{onClick:()=>{p().then((e=>{re(e.data.data.user.id).then((e=>{const t=e.data.data.groups;k(t.map((e=>({key:e.id,group:e}))))}))}))},children:"查看我的用户组"})]}),N.length>0&&a(_e,{groupList:N,callBack:e=>O(e),extra:"点击报名"}),a("div",{className:"flex justify-center mt-8",children:a(r,{onClick:()=>{f(0)},children:"上一步"})})]}),2===h&&i("div",{children:["create"===g&&a(me,{status:"success",title:"创建小组成功",extra:i(e.exports.Fragment,{children:[a(je,{group:x}),i(m,{children:[a(r,{onClick:()=>{f(1)},children:"点击修改"}),a(r,{type:"primary",onClick:()=>O(-1),children:"点击报名"})]})]})}),"enter"===g&&a(me,{})]})]})},_e=e=>{const{groupList:t,callBack:o,extra:n}=e;return a(Q,{className:"mx-4",dataSource:t,renderItem:(e,t)=>a(Q.Item,{extra:a(r,{size:"small",onClick:()=>o(t),children:n}),children:a(Q.Item.Meta,{title:a("div",{children:e.group.title}),description:i("div",{children:[i("p",{children:["id：",e.group.id]}),i("p",{children:["小组描述：",e.group.content]}),i("p",{children:["自动通过用户申请：",e.group.auto?"是":"否"]})]})})})})},Ie="_groupMember_1figx_1",Me=t=>{const{group_id:r,showAdd:o}=t,[n,s]=e.exports.useState(!1),[l,c]=e.exports.useState([]);e.exports.useEffect((()=>{d()}),[]);const d=async()=>{try{const e=(await oe(r)).data.data.userList;for(let t of e){const e=await h(t.user_id);c((t=>{var a;return[...t,null==(a=e.data.data)?void 0:a.user]}))}}catch(e){}};return i(u,{children:[a("div",{className:"w-full",children:i(f.Group,{className:Ie,children:[l.map(((e,t)=>a(ue,{user:e,className:"hover:mx-2"},(null==e?void 0:e.id)||t))),o&&a(f,{icon:a(pe,{}),className:"",onClick:()=>s(!0)})]})}),a(ee,{open:n,onCancel:()=>s(!1)})]})},Fe=t=>{const{group:o,mode:n="info"}=t,s=c(g),[l,d]=e.exports.useState(),[p,f]=e.exports.useState(""),[b,y]=e.exports.useState(!1),[x,w]=v.useState();v.useEffect((()=>{h(o.leader_id).then((e=>{w(e.data.data.user)}))}),[]);const N=v.useMemo((()=>[{key:"id",label:"ID",children:o.id},{key:"content",label:"描述",children:o.content},{key:"leader",label:"创建者",children:null==x?void 0:x.name},{key:"auto",label:"自动通过申请",children:o.auto?"是":"否"},{key:"member",label:"小组成员",children:a(Me,{group_id:o.id,showAdd:!1})}]),[o,x]);return i(u,{children:["info"===n&&a(he,{column:1,title:o.title,items:N,layout:"vertical",contentStyle:{width:"100%"}}),"card"===n&&a("div",{className:"rounded shadow p-2 flex w-full",children:i("div",{className:"w-full",style:{fontWeight:400},children:[a("div",{children:t.group.title}),a("div",{className:"w-full",children:t.group.content})]})}),(null==s?void 0:s.level)&&(null==s?void 0:s.level)>=4&&(null==s?void 0:s.email)===(null==x?void 0:x.email)&&i(m,{children:[a(R,{addonAfter:"标准用户",value:l,onChange:e=>{d(e||1),f("")},min:1,status:p}),a(r,{type:"primary",onClick:async()=>{if(!l||l<=0)f("error");else try{y(!0);if(200===(await ne(o.id,l)).data.code){(await se(o.id)).data.data.userStandards}}catch{}finally{y(!1)}},loading:b,children:"点击生成"})]})]})};let Oe;const Ee=r=>{const{endTime:o,onCountZero:n}=r,[s,l]=e.exports.useState(),{token:c}=b.useToken();e.exports.useEffect((()=>(d(),()=>{clearInterval(Oe)})),[o]);const d=()=>{const e=t(o),a={day:"00",hour:"00",min:"00",second:"00"},i=()=>{const i=t();let r=e.unix()-i.unix();r>=0?(r>=86400?(a.day=Math.floor(r/86400)>=10?String(Math.floor(r/86400)):`0${String(Math.floor(r/86400))}`,r-=86400*Number(a.day)):r<86400&&r>82800&&(a.day="00"),r>=3600?(a.hour=Math.floor(r/3600)>=10?String(Math.floor(r/3600)):`0${String(Math.floor(r/3600))}`,r-=3600*Number(a.hour)):r>3540&&r<3600&&(a.hour="00"),r>=60?(a.min=Math.floor(r/60)>=10?String(Math.floor(r/60)):`0${String(Math.floor(r/60))}`,r-=60*Number(a.min)):r<60&&(a.min="00"),a.second=r>=10?String(r):`0${String(r)}`):(n(),clearInterval(Oe)),l({...a})};i(),Oe=setInterval((()=>{i()}),1e3)};return i("div",{className:"flex justify-center",children:["00"!==(null==s?void 0:s.day)&&i("div",{className:"countdown-section",children:[a("span",{className:"countdown-amount",children:null==s?void 0:s.day}),a("span",{className:"countdown-period mx-4",children:"天"})]}),i("div",{className:"countdown-section",children:[a("span",{className:"countdown-amount",style:{backgroundColor:"00"===(null==s?void 0:s.hour)?c.colorInfoBorder:c.colorInfo},children:null==s?void 0:s.hour}),a("span",{className:"countdown-period",children:":"})]}),i("div",{className:"countdown-section",children:[a("span",{className:"countdown-amount",style:{backgroundColor:"00"===(null==s?void 0:s.min)?c.colorInfoBorder:c.colorInfo},children:null==s?void 0:s.min}),a("span",{className:"countdown-period",children:":"})]}),a("div",{className:"countdown-section",children:a("span",{className:"countdown-amount",style:{backgroundColor:"00"===(null==s?void 0:s.second)?c.colorInfoBorder:c.colorInfo},children:null==s?void 0:s.second})})]})},Le=()=>{c(y);const{token:o}=b.useToken(),n=x.useNavTo(),p=c(w),{competition_id:f}=N(),[g,v]=e.exports.useState(""),[F,D]=k(fe),[T,q]=k(ge),[R,$]=k(ve),[A,P]=e.exports.useState(0),[B,V]=e.exports.useState(),[J,U]=e.exports.useState(!1),[G,K]=e.exports.useState(!1),[W,Z]=e.exports.useState(!1),[X,ae]=e.exports.useState([]),[ie,re]=e.exports.useState([]),[oe,ne]=e.exports.useState(),se=c(d),ce=e.exports.useMemo((()=>S.getPathArray(p)[3]),[p]);e.exports.useEffect((()=>{f&&de()}),[f]);const de=async()=>{var e,a;if(!f)return;const i=await O(f),r=await E(f),o=i.data.data.competition;o.labels=((null==(e=r.data.data)?void 0:e.competitionLabels)||[]).map((e=>({id:e.id,label:e.label,competition_id:e.compeition_id}))),o.type="OI"!==o.type?o.type.toLowerCase():o.type;const n=o.type,s=await Y(n,o.id),l=(c=o.start_time,d=o.end_time,t(c).valueOf()>t().valueOf()?"notStart":t(c).valueOf()<t().valueOf()&&t(d).valueOf()>t().valueOf()?"underway":"finished");var c,d;if("match"!==n&&("notStart"===l&&V(o.start_time),"underway"===l&&V(o.end_time)),"group"===n&&$(!!s.data.data),"group"!==n&&$(null==(a=s.data.data)?void 0:a.enter),q(o),v(n),D(l),"group"===n){const e=s.data.data.group,t=(await le(e.id)).data.data.userList,a=[];for(let i of t){const e=await h(i.user_id);a.push(e.data.data.user)}ne({...e,members:a})}const m=await z(n,o.id);P(m.data.data.total)},me=async()=>{if(!T)return;const e={password:"666666"};if(R){if(R){let e;e=oe?await H(g,null==T?void 0:T.id,oe.id?oe.id:""):await H(g,null==T?void 0:T.id),200===e.data.code?(U(!1),$(!1),P((e=>e-1)),se&&se.success({message:"取消报名成功"})):e&&se&&se.warning({message:e.data.msg})}}else{const t=await L(g,null==T?void 0:T.id,JSON.stringify(e));200===t.data.code?(U(!1),$(!0),P((e=>e+1)),se&&se.success({message:"报名成功"})):se&&se.warning({message:t.data.msg})}};return i("div",{className:be.commondetail,children:[i("div",{children:[T&&i("div",{className:be.header,children:[i("div",{className:be.info,children:[i("div",{className:"cursor-pointer",onClick:()=>"notStart"===F&&U(!0),children:["notStart"===F&&i(u,{children:[!R&&a(j,{href:"#icon-weibaoming",color:o.colorWarning,size:4}),R&&a(j,{href:"#icon-yibaoming",color:o.colorInfo,size:4})]}),"underway"===F&&a(j,{href:"#icon-jinhangzhong",color:o.colorSuccess,size:4}),"finished"===F&&a(j,{href:"#icon-yijieshu",color:o.colorError,size:4})]}),a("div",{className:"flex-grow",children:a("div",{className:" flex justify-center items-center font-bold ",children:a("div",{style:{fontSize:"2rem"},children:null==T?void 0:T.title})})}),"number"==typeof A&&a("div",{className:"flex flex-col items-center justify-center",children:i("div",{className:"flex justify-center ",children:[a("div",{children:"已参赛："}),a(C,{title:"查看报名列表",children:a("div",{onClick:()=>(async()=>{if(ae([]),re([]),Z(!0),null==T?void 0:T.id){const e=await z(g,null==T?void 0:T.id);if(200===e.data.code){const t=[];for(let a of e.data.data.competitionRanks)if("Group"===g||"group"===g){const e=await te(a.member_id);t.push(e.data.data.group),re(t)}else{const e=await h(a.member_id);t.push(e.data.data.user),ae(t)}}}})(),className:"hover:cursor-pointer",style:{color:o.colorLink},children:A})})]})})]}),a("div",{className:be.countdown,children:B&&i(u,{children:["finished"!==F&&a("div",{children:i("div",{className:"flex justify-center items-center mb-4",children:["notStart"===F&&i("span",{children:["距离比赛",a("span",{style:{color:o.colorError},children:"开始"}),"还剩"]}),"underway"===F&&i("span",{children:["距离比赛",a("span",{style:{color:o.colorError},children:"结束"}),"还剩"]})]})}),a(Ee,{endTime:B,onCountZero:()=>{"notStart"===F&&V(T.end_time),D("notStart"===F?"underway":"finished")}})]})})]}),!T&&a(_,{})]}),a(I,{}),a("div",{className:be.content,children:i("div",{className:be.contentCard,children:[a(s,{className:"mb-8",selectedKeys:[ce],onClick:e=>(e=>{const t=e.key;if("overview"===t)n(`/competition/common/${f}/${t}`);else switch(F){case"notStart":se&&se.warning({message:"比赛未开始"});break;case"underway":R&&n(`/competition/common/${f}/${t}`),!R&&se&&se.warning({message:i("div",{children:[a("p",{children:"比赛进行中，您未报名此比赛"}),a("p",{onClick:()=>n("/competition/common/set"),className:"hover:cursor-pointer",style:{color:o.colorLink},children:"查看更多比赛"})]})});break;case"finished":R&&n(`/competition/common/${f}/${t}`),!R&&se&&se.warning({message:i("div",{children:[a("p",{children:"比赛已结束，您未报名此比赛"}),a("p",{onClick:()=>n("/competition/common/set"),className:"hover:cursor-pointer",style:{color:o.colorLink},children:"查看更多比赛"})]})})}})(e),mode:"horizontal",items:[{key:"overview",label:"总览"},{key:"problem",label:"题目"},{key:"rank",label:"排名"},{key:"record",label:"提交"}]}),a(M,{})]})}),i(ee,{title:R?"取消报名":"报名",open:J,onCancel:()=>U(!1),footer:[],children:[("single"===g||"OI"===g||"match"===g)&&i(u,{children:[i("div",{className:"mb-16 flex justify-center",children:[!R&&a("div",{children:"报名本比赛？"}),R&&a("div",{children:"取消报名本比赛？"})]}),i(m,{className:"flex justify-center mt-8",children:[a(r,{onClick:()=>U(!1),children:"取消"}),a(r,{type:"primary",onClick:me,children:"确定"})]})]}),"group"===g&&T&&i("div",{children:[!R&&a(Ce,{competition:T,type:g,onEnterSuccess:e=>{U(!1),P((e=>e+1)),$(!0),ne(e)}}),R&&oe&&i(u,{children:[a(Fe,{group:oe}),a("div",{className:"absolute right-8 bottom-8",children:a(r,{type:"dashed",danger:!0,onClick:()=>me(),children:"取消报名"})})]})]})]}),a(ee,{title:"报名列表",open:W,onCancel:()=>Z(!1),footer:[],children:i(u,{children:[X.length>0&&a(Q,{itemLayout:"horizontal",dataSource:X,renderItem:(e,t)=>a(Q.Item,{children:a(Q.Item.Meta,{title:a(l,{user:e})})})}),ie.length>0&&a(Q,{itemLayout:"horizontal",dataSource:ie,renderItem:(e,t)=>a(Q.Item,{children:a(Q.Item.Meta,{title:a(Fe,{group:e})})})})]})}),T&&a(ke,{competition:T,setcompetition:q,openUpdateModal:G,setopenUpdateModal:K})]})};export{Le as default};
