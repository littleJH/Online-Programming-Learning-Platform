import{b5 as e,b6 as t,b7 as r,ba as o,x as n,N as a,H as l,a5 as i,a as s,v as c,_ as u,y as d,L as p,aw as h,j as g,F as m,w as f,$ as b,a4 as C,D as v,ag as x,a6 as y,a7 as $,a8 as S,ap as w,ao as O,an as R,P as N,bM as j,bP as k,e as H,bQ as P,d as I,n as E,l as M,bN as z,bl as T,bR as A}from"./index.5c064301.js";import{C as F}from"./CodeEditorConfig.c1285810.js";import{a as W,d as B,u as D,s as L}from"./message.856d7a68.js";import{F as X}from"./index.0c9dd83b.js";import{g as V}from"./PurePanel.bec90387.js";import{g as q}from"./index.4e624168.js";import{F as _,N as U}from"./context.aa52cc0c.js";import{S as Y}from"./index.a45f76a6.js";import{I as G}from"./index.7aeb2011.js";import{I as J}from"./index.7d75d2c2.js";import{C as Q}from"./Collapse.6714be34.js";import{u as K}from"./useLocale.07149357.js";import{S as Z}from"./index.05a8036e.js";import"./row.e491f7a6.js";import"./List.6e377c69.js";import"./CheckOutlined.363c4795.js";import"./UpOutlined.722986ed.js";import"./BaseInput.01760c9b.js";var ee=["b"],te=["v"],re=function(e){return Math.round(Number(e||0))},oe=function(s){e(u,i);var c=t(u);function u(e){return r(this,u),c.call(this,function(e){if(e&&"object"===n(e)&&"h"in e&&"b"in e){var t=e,r=t.b,o=a(t,ee);return l(l({},o),{},{v:r})}return"string"==typeof e&&/hsb/.test(e)?e.replace(/hsb/,"hsv"):e}(e))}return o(u,[{key:"toHsbString",value:function(){var e=this.toHsb(),t=re(100*e.s),r=re(100*e.b),o=re(e.h),n=e.a,a="hsb(".concat(o,", ").concat(t,"%, ").concat(r,"%)"),l="hsba(".concat(o,", ").concat(t,"%, ").concat(r,"%, ").concat(n.toFixed(0===n?0:2),")");return 1===n?a:l}},{key:"toHsb",value:function(){var e=this.toHsv();"object"===n(this.originalInput)&&this.originalInput&&"h"in this.originalInput&&(e=this.originalInput);var t=e;t.v;var r=a(t,te);return l(l({},r),{},{b:e.v,a:this.a})}}]),u}(),ne=function(e){return e instanceof oe?e:new oe(e)},ae=ne("#1677ff"),le=function(e){var t=e.offset,r=e.targetRef,o=e.containerRef,n=e.color,a=e.type,i=o.current.getBoundingClientRect(),s=i.width,c=i.height,u=r.current.getBoundingClientRect(),d=u.width/2,p=u.height/2,h=(t.x+d)/s,g=1-(t.y+p)/c,m=n.toHsb(),f=h,b=(t.x+d)/s*360;if(a)switch(a){case"hue":return ne(l(l({},m),{},{h:b<=0?0:b}));case"alpha":return ne(l(l({},m),{},{a:f<=0?0:f}))}return ne({h:m.h,s:h<=0?0:h,b:g>=1?1:g,a:m.a})},ie=function(e,t,r,o){var n=e.current.getBoundingClientRect(),a=n.width,l=n.height,i=t.current.getBoundingClientRect(),s=i.width,c=i.height,u=s/2,d=c/2,p=r.toHsb();if((0!==s||0!==c)&&s===c){if(o)switch(o){case"hue":return{x:p.h/360*a-u,y:-d/3};case"alpha":return{x:p.a/1*a-u,y:-d/3}}return{x:p.s*a-u,y:(1-p.b)*l-d}}},se=function(e){var t=e.color,r=e.prefixCls,o=e.className,n=e.style,a=e.onClick,l="".concat(r,"-color-block");return s("div",{className:c(l,o),style:n,onClick:a,children:s("div",{className:"".concat(l,"-inner"),style:{background:t}})})};function ce(e){var t=e.offset,r=e.targetRef,o=e.containerRef,n=e.direction,a=e.onDragChange,l=e.onDragChangeComplete,i=e.calculate,s=e.color,c=e.disabledDrag,p=u.exports.useState(t||{x:0,y:0}),h=d(p,2),g=h[0],m=h[1],f=u.exports.useRef(null),b=u.exports.useRef(null),C=u.exports.useRef({flag:!1});u.exports.useEffect((function(){if(!1===C.current.flag){var e=null==i?void 0:i(o);e&&m(e)}}),[s,o]),u.exports.useEffect((function(){return function(){document.removeEventListener("mousemove",f.current),document.removeEventListener("mouseup",b.current),document.removeEventListener("touchmove",f.current),document.removeEventListener("touchend",b.current),f.current=null,b.current=null}}),[]);var v=function(e){var t=function(e){var t="touches"in e?e.touches[0]:e,r=document.documentElement.scrollLeft||document.body.scrollLeft||window.pageXOffset,o=document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset;return{pageX:t.pageX-r,pageY:t.pageY-o}}(e),l=t.pageX,i=t.pageY,s=o.current.getBoundingClientRect(),c=s.x,u=s.y,d=s.width,p=s.height,h=r.current.getBoundingClientRect(),f=h.width,b=h.height,C=f/2,v=b/2,x=Math.max(0,Math.min(l-c,d))-C,y=Math.max(0,Math.min(i-u,p))-v,$={x:x,y:"x"===n?g.y:y};if(0===f&&0===b||f!==b)return!1;m($),null==a||a($)},x=function(e){e.preventDefault(),v(e)},y=function(e){e.preventDefault(),C.current.flag=!1,document.removeEventListener("mousemove",f.current),document.removeEventListener("mouseup",b.current),document.removeEventListener("touchmove",f.current),document.removeEventListener("touchend",b.current),f.current=null,b.current=null,null==l||l()};return[g,function(e){document.removeEventListener("mousemove",f.current),document.removeEventListener("mouseup",b.current),c||(v(e),C.current.flag=!0,document.addEventListener("mousemove",x),document.addEventListener("mouseup",y),document.addEventListener("touchmove",x),document.addEventListener("touchend",y),f.current=x,b.current=y)}]}var ue=function(e){var t=e.size,r=void 0===t?"default":t,o=e.color,n=e.prefixCls;return s("div",{className:c("".concat(n,"-handler"),p({},"".concat(n,"-handler-sm"),"small"===r)),style:{backgroundColor:o}})},de=function(e){var t=e.children,r=e.style,o=e.prefixCls;return s("div",{className:"".concat(o,"-palette"),style:l({position:"relative"},r),children:t})},pe=u.exports.forwardRef((function(e,t){var r=e.children,o=e.offset;return s("div",{ref:t,style:{position:"absolute",left:o.x,top:o.y,zIndex:1},children:r})})),he=function(e){var t=e.color,r=e.onChange,o=e.prefixCls,n=e.onChangeComplete,a=e.disabled,l=u.exports.useRef(),i=u.exports.useRef(),c=u.exports.useRef(t),p=h((function(e){var o=le({offset:e,targetRef:i,containerRef:l,color:t});c.current=o,r(o)})),m=ce({color:t,containerRef:l,targetRef:i,calculate:function(e){return ie(e,i,t)},onDragChange:p,onDragChangeComplete:function(){return null==n?void 0:n(c.current)},disabledDrag:a}),f=d(m,2),b=f[0],C=f[1];return s("div",{ref:l,className:"".concat(o,"-select"),onMouseDown:C,onTouchStart:C,children:g(de,{prefixCls:o,children:[s(pe,{offset:b,ref:i,children:s(ue,{color:t.toRgbString(),prefixCls:o})}),s("div",{className:"".concat(o,"-saturation"),style:{backgroundColor:"hsl(".concat(t.toHsb().h,",100%, 50%)"),backgroundImage:"linear-gradient(0deg, #000, transparent),linear-gradient(90deg, #fff, hsla(0, 0%, 100%, 0))"}})]})})},ge=function(e){var t=e.colors,r=e.children,o=e.direction,n=void 0===o?"to right":o,a=e.type,l=e.prefixCls,i=u.exports.useMemo((function(){return t.map((function(e,r){var o=ne(e);return"alpha"===a&&r===t.length-1&&o.setAlpha(1),o.toRgbString()})).join(",")}),[t,a]);return s("div",{className:"".concat(l,"-gradient"),style:{position:"absolute",inset:0,background:"linear-gradient(".concat(n,", ").concat(i,")")},children:r})},me=function(e){var t=e.gradientColors,r=e.direction,o=e.type,n=void 0===o?"hue":o,a=e.color,l=e.value,i=e.onChange,p=e.onChangeComplete,m=e.disabled,f=e.prefixCls,b=u.exports.useRef(),C=u.exports.useRef(),v=u.exports.useRef(a),x=h((function(e){var t=le({offset:e,targetRef:C,containerRef:b,color:a,type:n});v.current=t,i(t)})),y=ce({color:a,targetRef:C,containerRef:b,calculate:function(e){return ie(e,C,a,n)},onDragChange:x,onDragChangeComplete:function(){null==p||p(v.current,n)},direction:"x",disabledDrag:m}),$=d(y,2),S=$[0],w=$[1];return s("div",{ref:b,className:c("".concat(f,"-slider"),"".concat(f,"-slider-").concat(n)),onMouseDown:w,onTouchStart:w,children:g(de,{prefixCls:f,children:[s(pe,{offset:S,ref:C,children:s(ue,{size:"small",color:l,prefixCls:f})}),s(ge,{colors:t,direction:r,type:n,prefixCls:f})]})})};function fe(e){return void 0!==e}var be=["rgb(255, 0, 0) 0%","rgb(255, 255, 0) 17%","rgb(0, 255, 0) 33%","rgb(0, 255, 255) 50%","rgb(0, 0, 255) 67%","rgb(255, 0, 255) 83%","rgb(255, 0, 0) 100%"];const Ce=u.exports.forwardRef((function(e,t){var r=e.value,o=e.defaultValue,n=e.prefixCls,a=void 0===n?"rc-color-picker":n,l=e.onChange,i=e.onChangeComplete,h=e.className,f=e.style,b=e.panelRender,C=e.disabledAlpha,v=void 0!==C&&C,x=e.disabled,y=void 0!==x&&x,$=function(e,t){var r=t.defaultValue,o=t.value,n=u.exports.useState((function(){var t;return t=fe(o)?o:fe(r)?r:e,ne(t)})),a=d(n,2),l=a[0],i=a[1];return u.exports.useEffect((function(){o&&i(ne(o))}),[o]),[l,i]}(ae,{value:r,defaultValue:o}),S=d($,2),w=S[0],O=S[1],R=u.exports.useMemo((function(){var e=ne(w.toRgbString());return e.setAlpha(1),e.toRgbString()}),[w]),N=c("".concat(a,"-panel"),h,p({},"".concat(a,"-panel-disabled"),y)),j={prefixCls:a,onChangeComplete:i,disabled:y},k=function(e,t){r||O(e),null==l||l(e,t)},H=g(m,{children:[s(he,{color:w,onChange:k,...j}),g("div",{className:"".concat(a,"-slider-container"),children:[g("div",{className:c("".concat(a,"-slider-group"),p({},"".concat(a,"-slider-group-disabled-alpha"),v)),children:[s(me,{gradientColors:be,color:w,value:"hsl(".concat(w.toHsb().h,",100%, 50%)"),onChange:function(e){return k(e,"hue")},...j}),!v&&s(me,{type:"alpha",gradientColors:["rgba(255, 0, 4, 0) 0%",R],color:w,value:w.toRgbString(),onChange:function(e){return k(e,"alpha")},...j})]}),s(se,{color:w.toRgbString(),prefixCls:a})]})]});return s("div",{className:N,style:f,ref:t,children:"function"==typeof b?b(H):H})})),ve=f.createContext({}),xe=f.createContext({}),{Provider:ye}=ve,{Provider:$e}=xe,Se=(e,t)=>(null==e?void 0:e.replace(/[^\w/]/gi,"").slice(0,t?8:6))||"";let we=function(){function e(t){r(this,e),this.metaColor=new oe(t),t||this.metaColor.setAlpha(0)}return o(e,[{key:"toHsb",value:function(){return this.metaColor.toHsb()}},{key:"toHsbString",value:function(){return this.metaColor.toHsbString()}},{key:"toHex",value:function(){return e=this.toHexString(),t=this.metaColor.getAlpha()<1,e?Se(e,t):"";var e,t}},{key:"toHexString",value:function(){return 1===this.metaColor.getAlpha()?this.metaColor.toHexString():this.metaColor.toHex8String()}},{key:"toRgb",value:function(){return this.metaColor.toRgb()}},{key:"toRgbString",value:function(){return this.metaColor.toRgbString()}}]),e}();const Oe=e=>e instanceof we?e:new we(e),Re=e=>Math.round(Number(e||0)),Ne=e=>Re(100*e.toHsb().a),je=(e,t)=>{const r=e.toHsb();return r.a=t||1,Oe(r)},ke=e=>{let{prefixCls:t,value:r,colorCleared:o,onChange:n}=e;return s("div",{className:`${t}-clear`,onClick:()=>{if(r&&!o){const e=r.toHsb();e.a=0;const t=Oe(e);null==n||n(t)}}})};var He,Pe;(Pe=He||(He={})).hex="hex",Pe.rgb="rgb",Pe.hsb="hsb";const Ie=e=>{let{prefixCls:t,min:r=0,max:o=100,value:n,onChange:a,className:l,formatter:i}=e;const d=`${t}-steppers`,[p,h]=u.exports.useState(n);return u.exports.useEffect((()=>{Number.isNaN(n)||h(n)}),[n]),s(G,{className:c(d,l),min:r,max:o,value:p,formatter:i,size:"small",onChange:e=>{n||h(e||0),null==a||a(e)}})},Ee=e=>{let{prefixCls:t,value:r,onChange:o}=e;const n=`${t}-alpha-input`,[a,l]=u.exports.useState(Oe(r||"#000"));u.exports.useEffect((()=>{r&&l(r)}),[r]);return s(Ie,{value:Ne(a),prefixCls:t,formatter:e=>`${e}%`,className:n,onChange:e=>{const t=a.toHsb();t.a=(e||0)/100;const n=Oe(t);r||l(n),null==o||o(n)}})},Me=/(^#[\da-f]{6}$)|(^#[\da-f]{8}$)/i,ze=e=>Me.test(`#${e}`),Te=e=>{let{prefixCls:t,value:r,onChange:o}=e;const n=`${t}-hex-input`,[a,l]=u.exports.useState(null==r?void 0:r.toHex());u.exports.useEffect((()=>{const e=null==r?void 0:r.toHex();ze(e)&&r&&l(Se(e))}),[r]);return s(J,{className:n,value:a,prefix:"#",onChange:e=>{const t=e.target.value;l(Se(t)),ze(Se(t,!0))&&(null==o||o(Oe(t)))},size:"small"})},Ae=e=>{let{prefixCls:t,value:r,onChange:o}=e;const n=`${t}-hsb-input`,[a,l]=u.exports.useState(Oe(r||"#000"));u.exports.useEffect((()=>{r&&l(r)}),[r]);const i=(e,t)=>{const n=a.toHsb();n[t]="h"===t?e:(e||0)/100;const i=Oe(n);r||l(i),null==o||o(i)};return g("div",{className:n,children:[s(Ie,{max:360,min:0,value:Number(a.toHsb().h),prefixCls:t,className:n,formatter:e=>Re(e||0).toString(),onChange:e=>i(Number(e),"h")}),s(Ie,{max:100,min:0,value:100*Number(a.toHsb().s),prefixCls:t,className:n,formatter:e=>`${Re(e||0)}%`,onChange:e=>i(Number(e),"s")}),s(Ie,{max:100,min:0,value:100*Number(a.toHsb().b),prefixCls:t,className:n,formatter:e=>`${Re(e||0)}%`,onChange:e=>i(Number(e),"b")})]})},Fe=e=>{let{prefixCls:t,value:r,onChange:o}=e;const n=`${t}-rgb-input`,[a,l]=u.exports.useState(Oe(r||"#000"));u.exports.useEffect((()=>{r&&l(r)}),[r]);const i=(e,t)=>{const n=a.toRgb();n[t]=e||0;const i=Oe(n);r||l(i),null==o||o(i)};return g("div",{className:n,children:[s(Ie,{max:255,min:0,value:Number(a.toRgb().r),prefixCls:t,className:n,onChange:e=>i(Number(e),"r")}),s(Ie,{max:255,min:0,value:Number(a.toRgb().g),prefixCls:t,className:n,onChange:e=>i(Number(e),"g")}),s(Ie,{max:255,min:0,value:Number(a.toRgb().b),prefixCls:t,className:n,onChange:e=>i(Number(e),"b")})]})},We=[He.hex,He.hsb,He.rgb].map((e=>({value:e,label:e.toLocaleUpperCase()}))),Be=e=>{const{prefixCls:t,format:r,value:o,disabledAlpha:n,onFormatChange:a,onChange:l}=e,[i,c]=b(He.hex,{value:r,onChange:a}),d=`${t}-input`,p=u.exports.useMemo((()=>{const e={value:o,prefixCls:t,onChange:l};switch(i){case He.hsb:return s(Ae,{...Object.assign({},e)});case He.rgb:return s(Fe,{...Object.assign({},e)});case He.hex:default:return s(Te,{...Object.assign({},e)})}}),[i,t,o,l]);return g("div",{className:`${d}-container`,children:[s(Y,{value:i,variant:"borderless",getPopupContainer:e=>e,popupMatchSelectWidth:68,placement:"bottomRight",onChange:e=>{c(e)},className:`${t}-format-select`,size:"small",options:We}),s("div",{className:d,children:p}),!n&&s(Ee,{prefixCls:t,value:o,onChange:l})]})};var De=globalThis&&globalThis.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]])}return r};const Le=()=>{const e=u.exports.useContext(ve),{prefixCls:t,colorCleared:r,allowClear:o,value:n,disabledAlpha:a,onChange:l,onClear:i,onChangeComplete:c}=e,d=De(e,["prefixCls","colorCleared","allowClear","value","disabledAlpha","onChange","onClear","onChangeComplete"]);return g(m,{children:[o&&s(ke,{...Object.assign({prefixCls:t,value:n,colorCleared:r,onChange:e=>{null==l||l(e),null==i||i()}},d)}),s(Ce,{prefixCls:t,value:null==n?void 0:n.toHsb(),disabledAlpha:a,onChange:(e,t)=>null==l?void 0:l(e,t,!0),onChangeComplete:c}),s(Be,{...Object.assign({value:n,onChange:l,prefixCls:t,disabledAlpha:a},d)})]})},Xe=e=>e.map((e=>(e.colors=e.colors.map(Oe),e))),Ve=(e,t)=>{const{r:r,g:o,b:n,a:a}=e.toRgb(),l=new oe(e.toRgbString()).onBackground(t).toHsv();return a<=.5?l.v>.5:.299*r+.587*o+.114*n>192},qe=e=>{let{label:t}=e;return`panel-${t}`},_e=e=>{let{prefixCls:t,presets:r,value:o,onChange:n}=e;const[a]=K("ColorPicker"),[,l]=C(),[i]=b(Xe(r),{value:Xe(r),postState:Xe}),d=`${t}-presets`,p=u.exports.useMemo((()=>i.reduce(((e,t)=>{const{defaultOpen:r=!0}=t;return r&&e.push(qe(t)),e}),[])),[i]),h=i.map((e=>{var r;return{key:qe(e),label:s("div",{className:`${d}-label`,children:null==e?void 0:e.label}),children:s("div",{className:`${d}-items`,children:Array.isArray(null==e?void 0:e.colors)&&(null===(r=e.colors)||void 0===r?void 0:r.length)>0?e.colors.map(((e,r)=>s(se,{color:Oe(e).toRgbString(),prefixCls:t,className:c(`${d}-color`,{[`${d}-color-checked`]:e.toHexString()===(null==o?void 0:o.toHexString()),[`${d}-color-bright`]:Ve(e,l.colorBgElevated)}),onClick:()=>{return t=e,void(null==n||n(t));var t}},`preset-${r}-${e.toHexString()}`))):s("span",{className:`${d}-empty`,children:a.presetEmpty})})}}));return s("div",{className:d,children:s(Q,{defaultActiveKey:p,ghost:!0,items:h})})},Ue=()=>{const{prefixCls:e,value:t,presets:r,onChange:o}=u.exports.useContext(xe);return Array.isArray(r)?s(_e,{value:t,presets:r,prefixCls:e,onChange:o}):null};var Ye=globalThis&&globalThis.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]])}return r};const Ge=e=>{const{prefixCls:t,presets:r,panelRender:o,color:n,onChange:a,onClear:l}=e,i=Ye(e,["prefixCls","presets","panelRender","color","onChange","onClear"]),c=`${t}-inner`,u=Object.assign({prefixCls:t,value:n,onChange:a,onClear:l},i),d=f.useMemo((()=>({prefixCls:t,value:n,presets:r,onChange:a})),[t,n,r,a]),p=g("div",{className:`${c}-content`,children:[s(Le,{}),Array.isArray(r)&&s(v,{}),s(Ue,{})]});return s(ye,{value:u,children:s($e,{value:d,children:s("div",{className:c,children:"function"==typeof o?o(p,{components:{Picker:Le,Presets:Ue}}):p})})})};var Je=globalThis&&globalThis.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]])}return r};const Qe=u.exports.forwardRef(((e,t)=>{const{color:r,prefixCls:o,open:n,colorCleared:a,disabled:l,format:i,className:d,showText:p}=e,h=Je(e,["color","prefixCls","open","colorCleared","disabled","format","className","showText"]),m=`${o}-trigger`,f=u.exports.useMemo((()=>a?s(ke,{prefixCls:o}):s(se,{prefixCls:o,color:r.toRgbString()})),[r,a,o]);return g("div",{...Object.assign({ref:t,className:c(m,d,{[`${m}-active`]:n,[`${m}-disabled`]:l})},h),children:[f,p&&s("div",{className:`${m}-text`,children:"function"==typeof p?p(r):p?(()=>{const e=r.toHexString().toUpperCase(),t=Ne(r);switch(i){case"rgb":return r.toRgbString();case"hsb":return r.toHsbString();default:return t<100?`${e.slice(0,7)},${t}%`:e}})():void 0})]})}));function Ke(e){return void 0!==e}const Ze=(e,t)=>{const{defaultValue:r,value:o}=t,[n,a]=u.exports.useState((()=>{let t;return t=Ke(o)?o:Ke(r)?r:e,Oe(t||"")}));return u.exports.useEffect((()=>{o&&a(Oe(o))}),[o]),[n,a]},et=(e,t)=>({backgroundImage:`conic-gradient(${t} 0 25%, transparent 0 50%, ${t} 0 75%, transparent 0)`,backgroundSize:`${e} ${e}`}),tt=(e,t)=>{const{componentCls:r,borderRadiusSM:o,colorPickerInsetShadow:n,lineWidth:a,colorFillSecondary:l}=e;return{[`${r}-color-block`]:Object.assign(Object.assign({position:"relative",borderRadius:o,width:t,height:t,boxShadow:n},et("50%",e.colorFillSecondary)),{[`${r}-color-block-inner`]:{width:"100%",height:"100%",border:`${x(a)} solid ${l}`,borderRadius:"inherit"}})}},rt=e=>{const{componentCls:t,antCls:r,fontSizeSM:o,lineHeightSM:n,colorPickerAlphaInputWidth:a,marginXXS:l,paddingXXS:i,controlHeightSM:s,marginXS:c,fontSizeIcon:u,paddingXS:d,colorTextPlaceholder:p,colorPickerInputNumberHandleWidth:h,lineWidth:g}=e;return{[`${t}-input-container`]:{display:"flex",[`${t}-steppers${r}-input-number`]:{fontSize:o,lineHeight:n,[`${r}-input-number-input`]:{paddingInlineStart:i,paddingInlineEnd:0},[`${r}-input-number-handler-wrap`]:{width:h}},[`${t}-steppers${t}-alpha-input`]:{flex:`0 0 ${x(a)}`,marginInlineStart:l},[`${t}-format-select${r}-select`]:{marginInlineEnd:c,width:"auto","&-single":{[`${r}-select-selector`]:{padding:0,border:0},[`${r}-select-arrow`]:{insetInlineEnd:0},[`${r}-select-selection-item`]:{paddingInlineEnd:e.calc(u).add(l).equal(),fontSize:o,lineHeight:`${x(s)}`},[`${r}-select-item-option-content`]:{fontSize:o,lineHeight:n},[`${r}-select-dropdown`]:{[`${r}-select-item`]:{minHeight:"auto"}}}},[`${t}-input`]:{gap:l,alignItems:"center",flex:1,width:0,[`${t}-hsb-input,${t}-rgb-input`]:{display:"flex",gap:l,alignItems:"center"},[`${t}-steppers`]:{flex:1},[`${t}-hex-input${r}-input-affix-wrapper`]:{flex:1,padding:`0 ${x(d)}`,[`${r}-input`]:{fontSize:o,textTransform:"uppercase",lineHeight:x(e.calc(s).sub(e.calc(g).mul(2)).equal())},[`${r}-input-prefix`]:{color:p}}}}}},ot=e=>{const{componentCls:t,controlHeightLG:r,borderRadiusSM:o,colorPickerInsetShadow:n,marginSM:a,colorBgElevated:l,colorFillSecondary:i,lineWidthBold:s,colorPickerHandlerSize:c,colorPickerHandlerSizeSM:u,colorPickerSliderHeight:d}=e;return{[`${t}-select`]:{[`${t}-palette`]:{minHeight:e.calc(r).mul(4).equal(),overflow:"hidden",borderRadius:o},[`${t}-saturation`]:{position:"absolute",borderRadius:"inherit",boxShadow:n,inset:0},marginBottom:a},[`${t}-handler`]:{width:c,height:c,border:`${x(s)} solid ${l}`,position:"relative",borderRadius:"50%",cursor:"pointer",boxShadow:`${n}, 0 0 0 1px ${i}`,"&-sm":{width:u,height:u}},[`${t}-slider`]:{borderRadius:e.calc(d).div(2).equal(),[`${t}-palette`]:{height:d},[`${t}-gradient`]:{borderRadius:e.calc(d).div(2).equal(),boxShadow:n},"&-alpha":et(`${x(d)}`,e.colorFillSecondary),"&-hue":{marginBottom:a}},[`${t}-slider-container`]:{display:"flex",gap:a,marginBottom:a,[`${t}-slider-group`]:{flex:1,"&-disabled-alpha":{display:"flex",alignItems:"center",[`${t}-slider`]:{flex:1,marginBottom:0}}}}}},nt=e=>{const{componentCls:t,antCls:r,colorTextQuaternary:o,paddingXXS:n,colorPickerPresetColorSize:a,fontSizeSM:l,colorText:i,lineHeightSM:s,lineWidth:c,borderRadius:u,colorFill:d,colorWhite:p,marginXXS:h,paddingXS:g,fontHeightSM:m}=e;return{[`${t}-presets`]:{[`${r}-collapse-item > ${r}-collapse-header`]:{padding:0,[`${r}-collapse-expand-icon`]:{height:m,color:o,paddingInlineEnd:n}},[`${r}-collapse`]:{display:"flex",flexDirection:"column",gap:h},[`${r}-collapse-item > ${r}-collapse-content > ${r}-collapse-content-box`]:{padding:`${x(g)} 0`},"&-label":{fontSize:l,color:i,lineHeight:s},"&-items":{display:"flex",flexWrap:"wrap",gap:e.calc(h).mul(1.5).equal(),[`${t}-presets-color`]:{position:"relative",cursor:"pointer",width:a,height:a,"&::before":{content:'""',pointerEvents:"none",width:e.calc(a).add(e.calc(c).mul(4)).equal(),height:e.calc(a).add(e.calc(c).mul(4)).equal(),position:"absolute",top:e.calc(c).mul(-2).equal(),insetInlineStart:e.calc(c).mul(-2).equal(),borderRadius:u,border:`${x(c)} solid transparent`,transition:`border-color ${e.motionDurationMid} ${e.motionEaseInBack}`},"&:hover::before":{borderColor:d},"&::after":{boxSizing:"border-box",position:"absolute",top:"50%",insetInlineStart:"21.5%",display:"table",width:e.calc(a).div(13).mul(5).equal(),height:e.calc(a).div(13).mul(8).equal(),border:`${x(e.lineWidthBold)} solid ${e.colorWhite}`,borderTop:0,borderInlineStart:0,transform:"rotate(45deg) scale(0) translate(-50%,-50%)",opacity:0,content:'""',transition:`all ${e.motionDurationFast} ${e.motionEaseInBack}, opacity ${e.motionDurationFast}`},[`&${t}-presets-color-checked`]:{"&::after":{opacity:1,borderColor:p,transform:"rotate(45deg) scale(1) translate(-50%,-50%)",transition:`transform ${e.motionDurationMid} ${e.motionEaseOutBack} ${e.motionDurationFast}`},[`&${t}-presets-color-bright`]:{"&::after":{borderColor:"rgba(0, 0, 0, 0.45)"}}}}},"&-empty":{fontSize:l,color:o}}}},at=(e,t,r)=>({borderInlineEndWidth:e.lineWidth,borderColor:t,boxShadow:`0 0 0 ${x(e.controlOutlineWidth)} ${r}`,outline:0}),lt=e=>{const{componentCls:t}=e;return{"&-rtl":{[`${t}-presets-color`]:{"&::after":{direction:"ltr"}},[`${t}-clear`]:{"&::after":{direction:"ltr"}}}}},it=(e,t,r)=>{const{componentCls:o,borderRadiusSM:n,lineWidth:a,colorSplit:l,colorBorder:i,red6:s}=e;return{[`${o}-clear`]:Object.assign(Object.assign({width:t,height:t,borderRadius:n,border:`${x(a)} solid ${l}`,position:"relative",overflow:"hidden",cursor:"pointer",transition:`all ${e.motionDurationFast}`},r),{"&::after":{content:'""',position:"absolute",insetInlineEnd:a,top:0,display:"block",width:40,height:2,transformOrigin:"right",transform:"rotate(-45deg)",backgroundColor:s},"&:hover":{borderColor:i}})}},st=e=>{const{componentCls:t,colorError:r,colorWarning:o,colorErrorHover:n,colorWarningHover:a,colorErrorOutline:l,colorWarningOutline:i}=e;return{[`&${t}-status-error`]:{borderColor:r,"&:hover":{borderColor:n},[`&${t}-trigger-active`]:Object.assign({},at(e,r,l))},[`&${t}-status-warning`]:{borderColor:o,"&:hover":{borderColor:a},[`&${t}-trigger-active`]:Object.assign({},at(e,o,i))}}},ct=e=>{const{componentCls:t,controlHeightLG:r,controlHeightSM:o,controlHeight:n,controlHeightXS:a,borderRadius:l,borderRadiusSM:i,borderRadiusXS:s,borderRadiusLG:c,fontSizeLG:u}=e;return{[`&${t}-lg`]:{minWidth:r,height:r,borderRadius:c,[`${t}-color-block, ${t}-clear`]:{width:n,height:n,borderRadius:l},[`${t}-trigger-text`]:{fontSize:u}},[`&${t}-sm`]:{minWidth:o,height:o,borderRadius:i,[`${t}-color-block, ${t}-clear`]:{width:a,height:a,borderRadius:s}}}},ut=e=>{const{antCls:t,componentCls:r,colorPickerWidth:o,colorPrimary:n,motionDurationMid:a,colorBgElevated:l,colorTextDisabled:i,colorText:s,colorBgContainerDisabled:c,borderRadius:u,marginXS:d,marginSM:p,controlHeight:h,controlHeightSM:g,colorBgTextActive:m,colorPickerPresetColorSize:f,colorPickerPreviewSize:b,lineWidth:C,colorBorder:v,paddingXXS:y,fontSize:$,colorPrimaryHover:S,controlOutline:w}=e;return[{[r]:Object.assign({[`${r}-inner`]:Object.assign(Object.assign(Object.assign(Object.assign({"&-content":{display:"flex",flexDirection:"column",width:o,[`& > ${t}-divider`]:{margin:`${x(p)} 0 ${x(d)}`}},[`${r}-panel`]:Object.assign({},ot(e))},tt(e,b)),rt(e)),nt(e)),it(e,f,{marginInlineStart:"auto",marginBottom:d})),"&-trigger":Object.assign(Object.assign(Object.assign(Object.assign({minWidth:h,height:h,borderRadius:u,border:`${x(C)} solid ${v}`,cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",transition:`all ${a}`,background:l,padding:e.calc(y).sub(C).equal(),[`${r}-trigger-text`]:{marginInlineStart:d,marginInlineEnd:e.calc(d).sub(e.calc(y).sub(C)).equal(),fontSize:$,color:s},"&:hover":{borderColor:S},[`&${r}-trigger-active`]:Object.assign({},at(e,n,w)),"&-disabled":{color:i,background:c,cursor:"not-allowed","&:hover":{borderColor:m},[`${r}-trigger-text`]:{color:i}}},it(e,g)),tt(e,g)),st(e)),ct(e))},lt(e))}]},dt=y("ColorPicker",(e=>{const{colorTextQuaternary:t,marginSM:r}=e,o=$(e,{colorPickerWidth:234,colorPickerHandlerSize:16,colorPickerHandlerSizeSM:12,colorPickerAlphaInputWidth:44,colorPickerInputNumberHandleWidth:16,colorPickerPresetColorSize:18,colorPickerInsetShadow:`inset 0 0 1px 0 ${t}`,colorPickerSliderHeight:8,colorPickerPreviewSize:e.calc(8).mul(2).add(r).equal()});return[ut(o)]}));var pt=globalThis&&globalThis.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]])}return r};const ht=e=>{const{value:t,defaultValue:r,format:o,defaultFormat:n,allowClear:a=!1,presets:l,children:i,trigger:d="click",open:p,disabled:h,placement:g="bottomLeft",arrow:m=!0,panelRender:C,showText:v,style:x,className:y,size:$,rootClassName:j,prefixCls:k,styles:H,disabledAlpha:P=!1,onFormatChange:I,onChange:E,onClear:M,onOpenChange:z,onChangeComplete:T,getPopupContainer:A,autoAdjustOverflow:F=!0,destroyTooltipOnHide:W}=e,B=pt(e,["value","defaultValue","format","defaultFormat","allowClear","presets","children","trigger","open","disabled","placement","arrow","panelRender","showText","style","className","size","rootClassName","prefixCls","styles","disabledAlpha","onFormatChange","onChange","onClear","onOpenChange","onChangeComplete","getPopupContainer","autoAdjustOverflow","destroyTooltipOnHide"]),{getPrefixCls:D,direction:L,colorPicker:X}=u.exports.useContext(S),V=u.exports.useContext(w),Y=null!=h?h:V,[G,J]=Ze("",{value:t,defaultValue:r}),[Q,K]=b(!1,{value:p,postState:e=>!Y&&e,onChange:z}),[Z,ee]=b(o,{value:o,defaultValue:n,onChange:I}),[te,re]=u.exports.useState(!t&&!r),oe=D("color-picker",k),ne=u.exports.useMemo((()=>Ne(G)<100),[G]),{status:ae}=f.useContext(_),le=O($),ie=R(oe),[se,ce,ue]=dt(oe,ie),de=c(j,ue,ie,{[`${oe}-rtl`]:L}),pe=c(q(oe,ae),{[`${oe}-sm`]:"small"===le,[`${oe}-lg`]:"large"===le},null==X?void 0:X.className,de,y,ce),he=c(oe,de),ge=u.exports.useRef(!0),me=e=>{ge.current=!0;let t=Oe(e);P&&ne&&(t=je(e)),null==T||T(t)},fe={open:Q,trigger:d,placement:g,arrow:m,rootClassName:j,getPopupContainer:A,autoAdjustOverflow:F,destroyTooltipOnHide:W},be={prefixCls:oe,color:G,allowClear:a,colorCleared:te,disabled:Y,disabledAlpha:P,presets:l,panelRender:C,format:Z,onFormatChange:ee,onChangeComplete:me},Ce=Object.assign(Object.assign({},null==X?void 0:X.style),x);return se(s(N,{...Object.assign({style:null==H?void 0:H.popup,overlayInnerStyle:null==H?void 0:H.popupOverlayInner,onOpenChange:e=>{ge.current&&!Y&&K(e)},content:s(U,{override:!0,status:!0,children:s(Ge,{...Object.assign({},be,{onChange:(e,o,n)=>{let a=Oe(e);(te||(null===t||!t&&null===r))&&(re(!1),0===Ne(G)&&"alpha"!==o&&(a=je(a))),P&&ne&&(a=je(a)),n?ge.current=!1:null==T||T(a),J(a),null==E||E(a,a.toHexString())},onChangeComplete:me,onClear:()=>{re(!0),null==M||M()}})})}),overlayClassName:he},fe),children:i||s(Qe,{...Object.assign({open:Q,className:pe,style:Ce,color:t?Oe(t):G,prefixCls:oe,disabled:Y,colorCleared:te,showText:v,format:Z},B)})}))},gt=V(ht,"color-picker",(e=>e),(e=>Object.assign(Object.assign({},e),{placement:"bottom",autoAdjustOverflow:!1})));ht._InternalPanelDoNotUseOrYouWillBeFired=gt;const mt=ht,ft=()=>{const[e]=X.useForm(),[t]=X.useForm(),[r,o]=j(k),[n,a]=j(H),[l,i]=j(P),[c,d]=u.exports.useState(!0),p=I(E);u.exports.useEffect((()=>{h()}),[]);const h=async()=>{try{const e=await W();200===e.data.code&&(t.setFieldsValue(e.data.data.ai),d(!1))}catch{}},m=()=>{const t={...l,...e.getFieldsValue(!0)},o={...n,theme:JSON.stringify(t),manaco:JSON.stringify(r)};z(JSON.stringify(o)).then((async e=>{if(200===e.data.code){const e=await T();a(e.data.data.user),p&&p.success({message:"保存成功"})}}))},f=(t,r)=>{e.setFieldValue(r,`#${t.toHex()}`),i(e.getFieldsValue(!0))};return g("div",{style:{width:"100%"},children:[g("div",{className:"flex justify-between items-center",children:[g("h3",{className:"label flex items-center",children:["主题设置",s(M,{size:"small",style:{fontSize:"0.75rem",marginLeft:"1rem"},type:"dashed",onClick:async()=>{i(A),e.resetFields()},children:"重置"})]}),s(M,{type:"primary",size:"small",onClick:m,children:"保存"})]}),s(v,{}),g(X,{form:e,children:[s(X.Item,{name:"colorPrimary",label:"主题色",children:s(mt,{defaultValue:l.colorPrimary,showText:!0,format:"hex",onChangeComplete:e=>f(e,"colorPrimary")})}),s(X.Item,{name:"colorSuccess",label:"成功色",children:s(mt,{defaultValue:l.colorSuccess,showText:!0,format:"hex",onChangeComplete:e=>f(e,"colorSuccess")})}),s(X.Item,{name:"colorWarning",label:"警告色",children:s(mt,{defaultValue:l.colorWarning,showText:!0,format:"hex",onChangeComplete:e=>f(e,"colorWarning")})}),s(X.Item,{name:"colorError",label:"错误色",children:s(mt,{defaultValue:l.colorError,showText:!0,format:"hex",onChangeComplete:e=>f(e,"colorError")})}),s(X.Item,{name:"colorInfo",label:"信息色",children:s(mt,{defaultValue:l.colorInfo,showText:!0,format:"hex",onChangeComplete:e=>f(e,"colorInfo")})})]}),g("div",{className:"flex justify-between items-center",children:[s("h3",{className:"label",children:"留言板设置"}),s(M,{type:"primary",size:"small",onClick:async()=>{if(c)await B(),t.resetFields();else{const e=t.getFieldsValue(["characters","prologue","reply"]);200===(t.getFieldValue("user_id")?await D(e):await L(e)).data.code&&p&&p.success({message:"保存成功"})}},children:"保存"})]}),g(X,{layout:"vertical",labelCol:{span:8},form:t,style:{width:"50%"},children:[s(X.Item,{name:"isAi",label:"是否开启AI回复",children:s(Z,{checked:!c,onChange:e=>d(!e)})}),s(X.Item,{name:"characters",label:"人设",shouldUpdate:!0,children:s(J,{placeholder:"请输入人设",disabled:c})}),s(X.Item,{name:"prologue",label:"开场白",children:s(J,{placeholder:"请输入开场白",disabled:c})}),s(X.Item,{name:"reply",label:"是否回复自己",children:s(Z,{disabled:c})})]}),s(v,{}),g("div",{className:"flex justify-between items-center",children:[s("h3",{className:"label",children:"代码编辑器设置"}),s(M,{type:"primary",size:"small",onClick:m,children:"保存"})]}),s(v,{}),s(F,{monacoOptions:r,setMonacoOptions:o})]})};export{ft as default};
