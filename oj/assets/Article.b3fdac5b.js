import{m as e,bI as t,d as a,n as s,_ as i,a as o}from"./index.5c064301.js";import{A as r}from"./ArticleCard.4a720d44.js";import{g as c,d as m}from"./article.08f59da4.js";import{P as d}from"./PaginationList.4a73bb02.js";import{s as n}from"./style.module.b5b5c35b.js";import"./remark.4a43720f.js";import"./MyTag.a4f82d92.js";import"./useClosable.e9e9bb76.js";import"./context.aa52cc0c.js";import"./MyAvatar.22457dcc.js";import"./index.9225dd62.js";import"./Skeleton.ed2cb458.js";import"./PlusOutlined.787b1bb7.js";import"./Dropdown.acaf0b68.js";import"./index.0ec24622.js";import"./Pagination.855f4d50.js";import"./index.a45f76a6.js";import"./List.6e377c69.js";import"./PurePanel.bec90387.js";import"./index.4e624168.js";import"./useLocale.07149357.js";import"./CheckOutlined.363c4795.js";import"./row.e491f7a6.js";import"./index.bad11826.js";import"./ActionButton.76c967e9.js";const p=()=>{const p=e.useNavTo(),[l,u]=t(),j=a(s),[b,g]=i.exports.useState([]),[f,x]=i.exports.useState(Number(l.get("pageNum"))||1),[S,N]=i.exports.useState(Number(l.get("pageSize"))||10),[P,h]=i.exports.useState(0),[y,A]=i.exports.useState(!0);i.exports.useEffect((()=>{u((e=>(e.set("pageNum",String(f)),e.set("pageSize",String(S)),e))),v()}),[f,S]);const v=()=>{A(!0),g([]),c(f,S).then((e=>{g(e.data.data.articles),h(e.data.data.total),A(!1)}))};return o("div",{className:n.creationArticle,children:o(d,{dataSource:b,loading:y,onDelete:async(e,t)=>{const{data:a}=await m(e.id);200===a.code&&(j&&j.success({message:`文章“${e.title}”已删除`}),g((e=>[...e.slice(0,t),...e.slice(t+1)])))},onDetail:e=>{p(`/community/article/${e.id}`)},onUpdate:e=>{p(`/creation/article?article_id=${e.id}`)},pageNum:f,pageSize:S,total:P,onPageChange:(e,t)=>{x(e),N(t)},itemRender:e=>o("div",{className:"w-full",children:o(r,{articleProp:e,mode:"action"},e.id)})})})};export{p as default};
