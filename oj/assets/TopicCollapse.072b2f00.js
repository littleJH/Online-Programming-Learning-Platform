import{_ as e,a as t,j as a,S as l,D as i,c8 as r,l as n}from"./index.5c064301.js";import{P as o}from"./ProblemTable.523975e8.js";import{R as s}from"./Readonly.a9ebc692.js";import{M as p}from"./MyCollapse.32cc964b.js";import{a as d}from"./topic.eb4e8577.js";import{s as c}from"./problem.1496b552.js";import{M as m}from"./MyAvatar.22457dcc.js";import{D as h}from"./index.972659d0.js";import{P as u}from"./index.bad11826.js";const b={topicTitleWrapper:"_topicTitleWrapper_qqvtw_1",extra:"_extra_qqvtw_4",problemTable:"_problemTable_qqvtw_10"},g=g=>{var x;const{topic:f,index:v,total:y,onDelete:_,onDetail:j,onUpdate:k}=g,[T,N]=e.exports.useState([]),[C,S]=e.exports.useState(!1),[q,D]=e.exports.useState({pageSize:20,pageNum:1,total:0}),w=e=>{!e||T.length>0||(async e=>{try{const t=(await d(e)).data.data.problemLists;if(t&&0===t.length)S(!0);else{const e=[];for(let a of t)e.push({...a,...(await c(a.problem_id)).data.data.problem});N(e.map(((e,t)=>({...e,key:`${f.id}-${e.id}-${t}`}))))}}catch{}})(e.id)};return t("div",{children:t(p,{onChange:e=>w((null==e?void 0:e.length)?f:null),items:[{key:f.id,label:a("div",{className:b.topicTitleWrapper,children:[t("span",{className:b.title,children:f.title}),t("div",{className:b.extra,children:a(l,{split:t(i,{type:"vertical"}),children:[a("span",{children:["题目总数：",y]}),t("span",{children:f.updated_at}),t(m,{user:f.user})]})})]}),extra:t(l,{onClick:e=>e.stopPropagation(),children:(()=>{const e=[];return j&&e.push(t(n,{type:"link",style:{padding:"0"},onClick:()=>j(f,v),children:"详情"})),k&&e.push(t(n,{style:{padding:"0"},type:"link",onClick:()=>k(f,v),children:"更新"})),_&&e.push(t(u,{title:"确定删除？",okText:"确认",cancelText:"取消",onConfirm:e=>{_(f,v)},children:t(n,{style:{padding:"0"},type:"link",danger:!0,children:"删除"})})),e})().map((e=>e))}),children:a("div",{children:[a(h,{size:"small",layout:"vertical",children:[t(h.Item,{label:"创建者",children:a(l,{children:[t(m,{user:f.user}),t(r,{to:"",className:"text-indigo-500 hover:text-indigo-500",children:null==(x=f.user)?void 0:x.name})]})}),t(h.Item,{label:"创建时间",children:f.created_at}),t(h.Item,{label:"题目总数",children:y}),""!==f.content&&t(h.Item,{label:"题单描述",children:t(s,{html:f.content})})]}),t("div",{className:b.problemTable,children:t(o,{mode:"default",problemList:T,pageNum:q.pageNum,pageSize:q.pageSize,total:q.total,fetchDone:C,setFetchDone:S,onLineClick:()=>{},onPageChange:(e,t)=>{D({...q,pageNum:e,pageSize:t})}})})]})}]})})};export{g as T};
