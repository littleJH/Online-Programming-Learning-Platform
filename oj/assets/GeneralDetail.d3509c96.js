import{a6 as e,K as o,bX as t,a9 as n,ag as r,a7 as i,_ as a,a8 as l,bY as s,v as c,j as d,a as m,aV as u,as as b,A as g,t as p,S as h,M as f,d as v,cx as y,bM as C,cy as $,F as x,i as k,R as N,m as O,bG as S,bm as w,D as j,l as z}from"./index.5c064301.js";import{R as T}from"./Readonly.a9ebc692.js";import{M as R}from"./MyTag.a4f82d92.js";import{T as I}from"./TextEditor.53774050.js";import{R as B}from"./RemarkCard.b0fdd9fd.js";import{s as E}from"./style.module.6da86900.js";import{T as D}from"./index.ec27075f.js";import{s as M}from"./communityStore.399498c1.js";import{U as P}from"./UserInfo.2df9e32c.js";import{C as H}from"./index.9225dd62.js";import{M as F}from"./index.6891d53f.js";import{D as W}from"./index.79a1b64c.js";const _=new o("antStatusProcessing",{"0%":{transform:"scale(0.8)",opacity:.5},"100%":{transform:"scale(2.4)",opacity:0}}),A=new o("antZoomBadgeIn",{"0%":{transform:"scale(0) translate(50%, -50%)",opacity:0},"100%":{transform:"scale(1) translate(50%, -50%)"}}),Z=new o("antZoomBadgeOut",{"0%":{transform:"scale(1) translate(50%, -50%)"},"100%":{transform:"scale(0) translate(50%, -50%)",opacity:0}}),L=new o("antNoWrapperZoomBadgeIn",{"0%":{transform:"scale(0)",opacity:0},"100%":{transform:"scale(1)"}}),X=new o("antNoWrapperZoomBadgeOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0)",opacity:0}}),q=new o("antBadgeLoadingCircle",{"0%":{transformOrigin:"50%"},"100%":{transform:"translate(50%, -50%) rotate(360deg)",transformOrigin:"50%"}}),V=e=>{const{fontHeight:o,lineWidth:t,marginXS:n,colorBorderBg:r}=e,a=o,l=t,s=e.colorBgContainer,c=e.colorError,d=e.colorErrorHover;return i(e,{badgeFontHeight:a,badgeShadowSize:l,badgeTextColor:s,badgeColor:c,badgeColorHover:d,badgeShadowColor:r,badgeProcessingDuration:"1.2s",badgeRibbonOffset:n,badgeRibbonCornerTransform:"scaleY(0.75)",badgeRibbonCornerFilter:"brightness(75%)"})},Y=e=>{const{fontSize:o,lineHeight:t,fontSizeSM:n,lineWidth:r}=e;return{indicatorZIndex:"auto",indicatorHeight:Math.round(o*t)-2*r,indicatorHeightSM:o,dotSize:n/2,textFontSize:n,textFontSizeSM:n,textFontWeight:"normal",statusSize:n/2}},G=e("Badge",(e=>(e=>{const{componentCls:o,iconCls:i,antCls:a,badgeShadowSize:l,motionDurationSlow:s,textFontSize:c,textFontSizeSM:d,statusSize:m,dotSize:u,textFontWeight:b,indicatorHeight:g,indicatorHeightSM:p,marginXS:h,calc:f}=e,v=`${a}-scroll-number`,y=t(e,((e,t)=>{let{darkColor:n}=t;return{[`&${o} ${o}-color-${e}`]:{background:n,[`&:not(${o}-count)`]:{color:n}}}}));return{[o]:Object.assign(Object.assign(Object.assign(Object.assign({},n(e)),{position:"relative",display:"inline-block",width:"fit-content",lineHeight:1,[`${o}-count`]:{zIndex:e.indicatorZIndex,minWidth:g,height:g,color:e.badgeTextColor,fontWeight:b,fontSize:c,lineHeight:r(g),whiteSpace:"nowrap",textAlign:"center",background:e.badgeColor,borderRadius:f(g).div(2).equal(),boxShadow:`0 0 0 ${r(l)} ${e.badgeShadowColor}`,transition:`background ${e.motionDurationMid}`,a:{color:e.badgeTextColor},"a:hover":{color:e.badgeTextColor},"a:hover &":{background:e.badgeColorHover}},[`${o}-count-sm`]:{minWidth:p,height:p,fontSize:d,lineHeight:r(p),borderRadius:f(p).div(2).equal()},[`${o}-multiple-words`]:{padding:`0 ${r(e.paddingXS)}`,bdi:{unicodeBidi:"plaintext"}},[`${o}-dot`]:{zIndex:e.indicatorZIndex,width:u,minWidth:u,height:u,background:e.badgeColor,borderRadius:"100%",boxShadow:`0 0 0 ${r(l)} ${e.badgeShadowColor}`},[`${o}-dot${v}`]:{transition:`background ${s}`},[`${o}-count, ${o}-dot, ${v}-custom-component`]:{position:"absolute",top:0,insetInlineEnd:0,transform:"translate(50%, -50%)",transformOrigin:"100% 0%",[`&${i}-spin`]:{animationName:q,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear"}},[`&${o}-status`]:{lineHeight:"inherit",verticalAlign:"baseline",[`${o}-status-dot`]:{position:"relative",top:-1,display:"inline-block",width:m,height:m,verticalAlign:"middle",borderRadius:"50%"},[`${o}-status-success`]:{backgroundColor:e.colorSuccess},[`${o}-status-processing`]:{overflow:"visible",color:e.colorPrimary,backgroundColor:e.colorPrimary,"&::after":{position:"absolute",top:0,insetInlineStart:0,width:"100%",height:"100%",borderWidth:l,borderStyle:"solid",borderColor:"inherit",borderRadius:"50%",animationName:_,animationDuration:e.badgeProcessingDuration,animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",content:'""'}},[`${o}-status-default`]:{backgroundColor:e.colorTextPlaceholder},[`${o}-status-error`]:{backgroundColor:e.colorError},[`${o}-status-warning`]:{backgroundColor:e.colorWarning},[`${o}-status-text`]:{marginInlineStart:h,color:e.colorText,fontSize:e.fontSize}}}),y),{[`${o}-zoom-appear, ${o}-zoom-enter`]:{animationName:A,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack,animationFillMode:"both"},[`${o}-zoom-leave`]:{animationName:Z,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack,animationFillMode:"both"},[`&${o}-not-a-wrapper`]:{[`${o}-zoom-appear, ${o}-zoom-enter`]:{animationName:L,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack},[`${o}-zoom-leave`]:{animationName:X,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack},[`&:not(${o}-status)`]:{verticalAlign:"middle"},[`${v}-custom-component, ${o}-count`]:{transform:"none"},[`${v}-custom-component, ${v}`]:{position:"relative",top:"auto",display:"block",transformOrigin:"50% 50%"}},[`${v}`]:{overflow:"hidden",[`${v}-only`]:{position:"relative",display:"inline-block",height:g,transition:`all ${e.motionDurationSlow} ${e.motionEaseOutBack}`,WebkitTransformStyle:"preserve-3d",WebkitBackfaceVisibility:"hidden",[`> p${v}-only-unit`]:{height:g,margin:0,WebkitTransformStyle:"preserve-3d",WebkitBackfaceVisibility:"hidden"}},[`${v}-symbol`]:{verticalAlign:"top"}},"&-rtl":{direction:"rtl",[`${o}-count, ${o}-dot, ${v}-custom-component`]:{transform:"translate(-50%, -50%)"}}})}})(V(e))),Y),K=e(["Badge","Ribbon"],(e=>(e=>{const{antCls:o,badgeFontHeight:i,marginXS:a,badgeRibbonOffset:l,calc:s}=e,c=`${o}-ribbon`,d=`${o}-ribbon-wrapper`,m=t(e,((e,o)=>{let{darkColor:t}=o;return{[`&${c}-color-${e}`]:{background:t,color:t}}}));return{[`${d}`]:{position:"relative"},[`${c}`]:Object.assign(Object.assign(Object.assign(Object.assign({},n(e)),{position:"absolute",top:a,padding:`0 ${r(e.paddingXS)}`,color:e.colorPrimary,lineHeight:r(i),whiteSpace:"nowrap",backgroundColor:e.colorPrimary,borderRadius:e.borderRadiusSM,[`${c}-text`]:{color:e.colorTextLightSolid},[`${c}-corner`]:{position:"absolute",top:"100%",width:l,height:l,color:"currentcolor",border:`${r(s(l).div(2).equal())} solid`,transform:e.badgeRibbonCornerTransform,transformOrigin:"top",filter:e.badgeRibbonCornerFilter}}),m),{[`&${c}-placement-end`]:{insetInlineEnd:s(l).mul(-1).equal(),borderEndEndRadius:0,[`${c}-corner`]:{insetInlineEnd:0,borderInlineEndColor:"transparent",borderBlockEndColor:"transparent"}},[`&${c}-placement-start`]:{insetInlineStart:s(l).mul(-1).equal(),borderEndStartRadius:0,[`${c}-corner`]:{insetInlineStart:0,borderBlockEndColor:"transparent",borderInlineStartColor:"transparent"}},"&-rtl":{direction:"rtl"}})}})(V(e))),Y),U=e=>{const{className:o,prefixCls:t,style:n,color:r,children:i,text:u,placement:b="end",rootClassName:g}=e,{getPrefixCls:p,direction:h}=a.exports.useContext(l),f=p("ribbon",t),v=`${f}-wrapper`,[y,C,$]=K(f,v),x=s(r,!1),k=c(f,`${f}-placement-${b}`,{[`${f}-rtl`]:"rtl"===h,[`${f}-color-${r}`]:x},o),N={},O={};return r&&!x&&(N.background=r,O.color=r),y(d("div",{className:c(v,g,C,$),children:[i,d("div",{className:c(k,C),style:Object.assign(Object.assign({},N),n),children:[m("span",{className:`${f}-text`,children:u}),m("div",{className:`${f}-corner`,style:O})]})]}))};function J(e){let o,{prefixCls:t,value:n,current:r,offset:i=0}=e;return i&&(o={position:"absolute",top:`${i}00%`,left:0}),m("span",{style:o,className:c(`${t}-only-unit`,{current:r}),children:n})}function Q(e,o,t){let n=e,r=0;for(;(n+10)%10!==o;)n+=t,r+=t;return r}function ee(e){const{prefixCls:o,count:t,value:n}=e,r=Number(n),i=Math.abs(t),[l,s]=a.exports.useState(r),[c,d]=a.exports.useState(i),u=()=>{s(r),d(i)};let b,g;if(a.exports.useEffect((()=>{const e=setTimeout((()=>{u()}),1e3);return()=>{clearTimeout(e)}}),[r]),l===r||Number.isNaN(r)||Number.isNaN(l))b=[m(J,{...Object.assign({},e,{key:r,current:!0})})],g={transition:"none"};else{b=[];const o=r+10,t=[];for(let e=r;e<=o;e+=1)t.push(e);const n=t.findIndex((e=>e%10===l));b=t.map(((o,t)=>{const r=o%10;return m(J,{...Object.assign({},e,{key:o,value:r,offset:t-n,current:t===n})})}));g={transform:`translateY(${-Q(l,r,c<i?1:-1)}00%)`}}return m("span",{className:`${o}-only`,style:g,onTransitionEnd:u,children:b})}var oe=globalThis&&globalThis.__rest||function(e,o){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&o.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)o.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(t[n[r]]=e[n[r]])}return t};const te=a.exports.forwardRef(((e,o)=>{const{prefixCls:t,count:n,className:r,motionClassName:i,style:s,title:d,show:b,component:g="sup",children:p}=e,h=oe(e,["prefixCls","count","className","motionClassName","style","title","show","component","children"]),{getPrefixCls:f}=a.exports.useContext(l),v=f("scroll-number",t),y=Object.assign(Object.assign({},h),{"data-show":b,style:s,className:c(v,r,i),title:d});let C=n;if(n&&Number(n)%1==0){const e=String(n).split("");C=m("bdi",{children:e.map(((o,t)=>m(ee,{prefixCls:v,count:Number(n),value:o},e.length-t)))})}return s&&s.borderColor&&(y.style=Object.assign(Object.assign({},s),{boxShadow:`0 0 0 1px ${s.borderColor} inset`})),p?u(p,(e=>({className:c(`${v}-custom-component`,null==e?void 0:e.className,i)}))):m(g,{...Object.assign({},y,{ref:o}),children:C})}));var ne=globalThis&&globalThis.__rest||function(e,o){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&o.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)o.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(t[n[r]]=e[n[r]])}return t};const re=(e,o)=>{var t,n,r,i,g;const{prefixCls:p,scrollNumberPrefixCls:h,children:f,status:v,text:y,color:C,count:$=null,overflowCount:x=99,dot:k=!1,size:N="default",title:O,offset:S,style:w,className:j,rootClassName:z,classNames:T,styles:R,showZero:I=!1}=e,B=ne(e,["prefixCls","scrollNumberPrefixCls","children","status","text","color","count","overflowCount","dot","size","title","offset","style","className","rootClassName","classNames","styles","showZero"]),{getPrefixCls:E,direction:D,badge:M}=a.exports.useContext(l),P=E("badge",p),[H,F,W]=G(P),_=$>x?`${x}+`:$,A="0"===_||0===_,Z=(null!=v||null!=C)&&(null===$||A&&!I),L=k&&!A,X=L?"":_,q=a.exports.useMemo((()=>(null==X||""===X||A&&!I)&&!L),[X,A,I,L]),V=a.exports.useRef($);q||(V.current=$);const Y=V.current,K=a.exports.useRef(X);q||(K.current=X);const U=K.current,J=a.exports.useRef(L);q||(J.current=L);const Q=a.exports.useMemo((()=>{if(!S)return Object.assign(Object.assign({},null==M?void 0:M.style),w);const e={marginTop:S[1]};return"rtl"===D?e.left=parseInt(S[0],10):e.right=-parseInt(S[0],10),Object.assign(Object.assign(Object.assign({},e),null==M?void 0:M.style),w)}),[D,S,w,null==M?void 0:M.style]),ee=null!=O?O:"string"==typeof Y||"number"==typeof Y?Y:void 0,oe=q||!y?null:m("span",{className:`${P}-status-text`,children:y}),re=Y&&"object"==typeof Y?u(Y,(e=>({style:Object.assign(Object.assign({},Q),e.style)}))):void 0,ie=s(C,!1),ae=c(null==T?void 0:T.indicator,null===(t=null==M?void 0:M.classNames)||void 0===t?void 0:t.indicator,{[`${P}-status-dot`]:Z,[`${P}-status-${v}`]:!!v,[`${P}-color-${C}`]:ie}),le={};C&&!ie&&(le.color=C,le.background=C);const se=c(P,{[`${P}-status`]:Z,[`${P}-not-a-wrapper`]:!f,[`${P}-rtl`]:"rtl"===D},j,z,null==M?void 0:M.className,null===(n=null==M?void 0:M.classNames)||void 0===n?void 0:n.root,null==T?void 0:T.root,F,W);if(!f&&Z){const e=Q.color;return H(d("span",{...Object.assign({},B,{className:se,style:Object.assign(Object.assign(Object.assign({},null==R?void 0:R.root),null===(r=null==M?void 0:M.styles)||void 0===r?void 0:r.root),Q)}),children:[m("span",{className:ae,style:Object.assign(Object.assign(Object.assign({},null==R?void 0:R.indicator),null===(i=null==M?void 0:M.styles)||void 0===i?void 0:i.indicator),le)}),y&&m("span",{style:{color:e},className:`${P}-status-text`,children:y})]}))}return H(d("span",{...Object.assign({ref:o},B,{className:se,style:Object.assign(Object.assign({},null===(g=null==M?void 0:M.styles)||void 0===g?void 0:g.root),null==R?void 0:R.root)}),children:[f,m(b,{visible:!q,motionName:`${P}-zoom`,motionAppear:!1,motionDeadline:1e3,children:e=>{let{className:o,ref:t}=e;var n,r;const i=E("scroll-number",h),a=J.current,l=c(null==T?void 0:T.indicator,null===(n=null==M?void 0:M.classNames)||void 0===n?void 0:n.indicator,{[`${P}-dot`]:a,[`${P}-count`]:!a,[`${P}-count-sm`]:"small"===N,[`${P}-multiple-words`]:!a&&U&&U.toString().length>1,[`${P}-status-${v}`]:!!v,[`${P}-color-${C}`]:ie});let s=Object.assign(Object.assign(Object.assign({},null==R?void 0:R.indicator),null===(r=null==M?void 0:M.styles)||void 0===r?void 0:r.indicator),Q);return C&&!ie&&(s=s||{},s.background=C),m(te,{prefixCls:i,show:!q,motionClassName:o,className:l,count:U,title:ee,style:s,ref:t,children:re},"scrollNumber")}}),oe]}))},ie=a.exports.forwardRef(re);ie.Ribbon=U;const ae=ie;const le={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"unordered-list",theme:"outlined"};var se=function(e,o){return m(g,{...e,ref:o,icon:le})};const ce=a.exports.forwardRef(se),de="_item_1tzaz_216",me=e=>{const{onLikeClick:o,onCollectClick:t,onCommentClick:n,onArrowupClick:r,onMenubtnClick:i,likeNum:a,collectNum:l,remarkNum:s,liked:c,collected:u}=e,{token:b}=p.useToken(),g={backgroundColor:b.colorBgBase,color:b.colorTextDescription};return m("div",{children:d(h,{direction:"vertical",size:"large",children:[m(ae,{size:"small",count:a,offset:[-5,5],color:b.colorPrimary,children:m("div",{className:de,onClick:o,style:g,children:m(f,{href:1===c?"#icon-liked":"#icon-like",size:1.5,color:1===c?b.colorPrimaryTextHover:b.colorTextDescription})})}),m(ae,{size:"small",count:l,offset:[-5,5],color:b.colorPrimary,children:m("div",{className:de,onClick:t,style:g,children:m(f,{href:u?"#icon-collected":"#icon-collect",size:1.5,color:u?b.colorPrimaryTextHover:b.colorTextDescription})})}),m(ae,{size:"small",count:s,offset:[-5,5],color:b.colorPrimary,children:m("div",{className:de,onClick:n,style:g,children:m(f,{href:"#icon-comment",size:1.5})})}),m("div",{className:de,onClick:r,style:g,children:m(f,{href:"#icon-arrowup",size:1.5})}),i&&m("div",{className:de,style:g,onClick:i,children:m(ce,{})})]})})},ue=()=>{const e=v(y),[o,t]=C($);return m(x,{children:e.length>0&&m(D,{style:{minWidth:"18rem",height:"100%"},treeData:e,defaultExpandAll:!0,selectedKeys:o,onSelect:e=>{const n=document.createElement("a");e.length>0?(t(e),n.href=`#${e[0]}`,n.click()):0===e.length&&(n.href=`#${o[0]}`,n.click(),t(o))}})})},be=e=>{var o,t;const{currentObject:n,openRemarkModal:r,remarkContent:i,onRemarkChange:l,onArrowupClick:s,onCollectClick:c,onCommentClick:u,onLikeClick:b,onSubmitRemarkClick:g,onRemarkModalChange:C}=e,$=v(k),[D,_]=a.exports.useState(!1),A=N(y),Z=N(M),{token:L}=p.useToken();O.useListenContentScroll({followScroll:!0}),a.exports.useEffect((()=>{const e=document.getElementById("article");if(n&&e){const o=S.generateTOC(e);A(o),Z(q(o))}return()=>{}}),[n]);const X=a.exports.useMemo((()=>n&&n.res_long&&""!==n.res_long&&JSON.parse(n.res_long).img),[n]),q=e=>n?d(x,{children:[m(H,{size:"small",children:m(P,{user:n.user})}),e.length>0&&m(H,{className:E.directory,children:m(ue,{})})]}):"";return m("div",{className:E.generalDetail,children:n&&d("div",{className:E.content,children:[m("div",{id:"top"}),d(H,{size:"small",children:[d("div",{className:E.header,style:{backgroundColor:L.colorBgBase},children:[m("h1",{className:E.title,children:n.title}),d(h,{size:"large",className:E.authorLine,style:{color:L.colorTextDescription},children:[m("span",{children:null==(o=n.user)?void 0:o.name}),m("span",{children:n.created_at}),d("span",{className:"flex items-center",children:[m(f,{href:"#icon-visible",color:L.colorTextDescription}),m("span",{className:"ml-2",children:n.visibleNum})]})]}),m(h,{className:E.labelLine,children:n.labels&&n.labels.map(((e,o)=>m(R,{children:e.label},o)))})]}),m("img",{className:E.myImg,src:`${w}/${X}`,alt:""}),m(j,{style:{margin:"1rem"}}),m("div",{id:"article",children:m(T,{html:n.content,borderd:!1})})]}),d("div",{id:"remark",children:[m("div",{className:"flex justify-center",children:m(z,{type:"dashed",className:"shadow m-4",onClick:()=>C(!0),children:"#我有一言"})}),m("div",{children:n.remark&&n.remark.remarks.map((e=>m(B,{remark:e},e.id)))})]}),m("div",{className:"w-12 h-12 px-4 fixed top-1/3 right-0 flex flex-col",style:{translate:"-50% -50%",zIndex:999},children:m(me,{onArrowupClick:s,onCollectClick:c,onCommentClick:u,onLikeClick:b,onMenubtnClick:$?()=>_(!0):null,likeNum:(null==n?void 0:n.likeNum)||0,collectNum:(null==n?void 0:n.collectNum)||0,remarkNum:(null==(t=null==n?void 0:n.remark)?void 0:t.total)||0,liked:(null==n?void 0:n.liked)||0,collected:(null==n?void 0:n.collected)||!1})}),m(F,{open:r,onCancel:()=>C(!1),footer:[m(z,{type:"primary",onClick:()=>{g()},children:"发布"},"submit")],title:"我有一言",children:m(I,{mode:"markdown",value:i,htmlChange:e=>l(e),placeholder:"发表我的看法~~~"})}),m(W,{open:D,placement:"bottom",onClose:()=>_(!1),closeIcon:!1,zIndex:9999999,style:{opacity:"0.9"},children:m(ue,{})})]})})};export{be as G};
