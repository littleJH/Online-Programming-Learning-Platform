import{_ as e,bF as a,j as t,F as l,a as s,o as r,d,e as i,w as o,S as n,l as c}from"./index.5c064301.js";import{d as u,e as m,f}from"./group.ab80a5d7.js";import{M as p}from"./MyAvatar.22457dcc.js";import{M as h}from"./index.6891d53f.js";import{P as v}from"./PlusOutlined.787b1bb7.js";import{D as y}from"./index.972659d0.js";import{I as x}from"./index.7aeb2011.js";const b="_groupMember_1figx_1",w=d=>{const{group_id:i,showAdd:o}=d,[n,c]=e.exports.useState(!1),[m,f]=e.exports.useState([]);e.exports.useEffect((()=>{y()}),[]);const y=async()=>{try{const e=(await u(i)).data.data.userList;for(let t of e){const e=await a(t.user_id);f((a=>{var t;return[...a,null==(t=e.data.data)?void 0:t.user]}))}}catch(e){}};return t(l,{children:[s("div",{className:"w-full",children:t(r.Group,{className:b,children:[m.map(((e,a)=>s(p,{user:e,className:"hover:mx-2"},(null==e?void 0:e.id)||a))),o&&s(r,{icon:s(v,{}),className:"",onClick:()=>c(!0)})]})}),s(h,{open:n,onCancel:()=>c(!1)})]})},g=r=>{const{group:u,mode:p="info"}=r,h=d(i),[v,b]=e.exports.useState(),[g,S]=e.exports.useState(""),[j,_]=e.exports.useState(!1),[k,N]=o.useState();o.useEffect((()=>{a(u.leader_id).then((e=>{N(e.data.data.user)}))}),[]);const M=o.useMemo((()=>[{key:"id",label:"ID",children:u.id},{key:"content",label:"描述",children:u.content},{key:"leader",label:"创建者",children:null==k?void 0:k.name},{key:"auto",label:"自动通过申请",children:u.auto?"是":"否"},{key:"member",label:"小组成员",children:s(w,{group_id:u.id,showAdd:!1})}]),[u,k]);return t(l,{children:["info"===p&&s(y,{column:1,title:u.title,items:M,layout:"vertical",contentStyle:{width:"100%"}}),"card"===p&&s("div",{className:"rounded shadow p-2 flex w-full",children:t("div",{className:"w-full",style:{fontWeight:400},children:[s("div",{children:r.group.title}),s("div",{className:"w-full",children:r.group.content})]})}),(null==h?void 0:h.level)&&(null==h?void 0:h.level)>=4&&(null==h?void 0:h.email)===(null==k?void 0:k.email)&&t(n,{children:[s(x,{addonAfter:"标准用户",value:v,onChange:e=>{b(e||1),S("")},min:1,status:g}),s(c,{type:"primary",onClick:async()=>{if(!v||v<=0)S("error");else try{_(!0);if(200===(await m(u.id,v)).data.code){(await f(u.id)).data.data.userStandards}}catch{}finally{_(!1)}},loading:j,children:"点击生成"})]})]})};export{g as G};
