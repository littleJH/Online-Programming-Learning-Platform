import{m as e,bI as t,d as s,n as a,_ as o,a as i}from"./index.5c064301.js";import{g as r,d as p}from"./topic.eb4e8577.js";import{P as m}from"./PaginationList.4a73bb02.js";import{T as c}from"./TopicCollapse.072b2f00.js";import"./Skeleton.ed2cb458.js";import"./index.0ec24622.js";import"./Pagination.855f4d50.js";import"./context.aa52cc0c.js";import"./index.a45f76a6.js";import"./List.6e377c69.js";import"./PurePanel.bec90387.js";import"./index.4e624168.js";import"./useLocale.07149357.js";import"./CheckOutlined.363c4795.js";import"./row.e491f7a6.js";import"./index.bad11826.js";import"./ActionButton.76c967e9.js";import"./ProblemTable.523975e8.js";import"./record.df22aa8c.js";import"./problem.1496b552.js";import"./progress.2cf02846.js";import"./MyTag.a4f82d92.js";import"./useClosable.e9e9bb76.js";import"./GeneralTable.8195648c.js";import"./Table.f08b7a7b.js";import"./index.ec27075f.js";import"./index.4d9ca8d6.js";import"./index.699f9875.js";import"./Dropdown.acaf0b68.js";import"./index.7d75d2c2.js";import"./BaseInput.01760c9b.js";import"./style.module.af136287.js";import"./Readonly.a9ebc692.js";import"./index.4cc837d4.js";import"./MyCollapse.32cc964b.js";import"./Collapse.6714be34.js";import"./MyAvatar.22457dcc.js";import"./index.972659d0.js";const d=()=>{const d=e.useNavTo(),[n,j]=t(),l=s(a),[b,u]=o.exports.useState([]),[f,x]=o.exports.useState(Number(n.get("pageNum"))||1),[g,S]=o.exports.useState(Number(n.get("pageSize"))||10),[N,P]=o.exports.useState(0),[T,y]=o.exports.useState(!0);o.exports.useEffect((()=>{j((e=>(e.set("pageNum",String(f)),e.set("pageSize",String(g)),e))),C()}),[f,g]);const C=()=>{y(!0),u([]),r(f,g).then((e=>{u(e.data.data.topics),P(e.data.data.total),y(!1)}))},h=e=>{d(`/creation/article?article_id=${e.id}`)},v=async(e,t)=>{const{data:s}=await p(e.id);200===s.code&&(l&&l.success({message:`题单“${e.title}”已删除`}),u((e=>[...e.slice(0,t),...e.slice(t+1)])))};return i("div",{children:i(m,{dataSource:b,loading:T,pageNum:f,pageSize:g,total:N,onPageChange:(e,t)=>{x(e),S(t)},split:!1,itemRender:(e,t)=>i("div",{className:"w-full",children:i(c,{topic:e,index:t,total:N,onDelete:v,onUpdate:h})})})})};export{d as default};
