import{c as e,aZ as t,t as a,_ as s,j as n,a as o,M as l,cf as r,cg as i,cc as c,bM as d,e as h,bP as u,cd as f,ch as p,d as m,n as g,F as x,S as y,l as v,al as C,q as b,bN as k,bl as N,bG as w}from"./index.5c064301.js";import{r as S}from"./recordStates.a45efd0a.js";import{L as j,F as L,g as z,a as M,c as R,b as E}from"./chatGpt.0470686f.js";import{o as O,l as T,a as V}from"./LanguageList.5e03f3ce.js";import{C as _}from"./CodeEditorConfig.c1285810.js";import{s as G}from"./problem.1496b552.js";import{S as H}from"./index.a45f76a6.js";import{D as P}from"./index.699f9875.js";import{M as $}from"./index.6891d53f.js";import{S as B}from"./SwapRightOutlined.64619f65.js";import{R as D}from"./index.4071f4af.js";import{S as F}from"./index.05a8036e.js";const I=e({baseURL:"test",type:"test"}),J=e=>I.post("/create",e,t()),W=e=>{const{caseSample:t,runResult:i,currentState:c,setcurrentState:d}=e,{token:h}=a.useToken();return s.exports.useLayoutEffect((()=>{i&&S.forEach((e=>{e.value===i.condition&&d(e)}))}),[i]),n("div",{className:"w-full h-full flex ",children:[n("div",{className:"h-12 pr-4 flex items-center",children:["info"===c.state&&""===c.value&&o(l,{href:"#icon-info",size:2,color:h.colorInfo}),"info"===c.state&&""!==c.value&&o(r,{}),"error"===c.state&&o(l,{href:"#icon-error",size:2,color:h.colorError}),"success"===c.state&&o(l,{href:"#icon-success",size:2,color:h.colorSuccess})]}),n("div",{className:"w-full",children:[("error"===c.state||"info"===c.state)&&o("div",{className:"h-12 flex items-center",children:c.label}),"success"===c.state&&i&&n("div",{className:"",children:[o("div",{className:"h-12 flex items-center",children:c.label}),n("div",{className:"",children:[n("span",{children:["Time：",i.time]}),n("span",{className:"ml-4",children:["Memory：",i.memory]})]}),n("div",{children:[n("p",{children:[o("span",{children:"输入："}),o("span",{children:t.input})]}),n("p",{children:[o("span",{children:"输出："}),o("span",{children:t.output})]}),n("p",{children:[o("span",{children:"当前输出："}),o("span",{className:"rounded "+(i.output===t.output?"bg-green-300":"bg-red-300"),children:i.output})]})]})]})]})]})},q=e=>{const{code:t}=e,a=s.exports.useRef(null);return s.exports.useEffect((()=>{a.current&&i.highlightBlock(a.current)}),[t,a]),o("pre",{children:o("code",{className:"cpp code",ref:a,children:t})})},U=e=>{var t;const{height:i,value:I,className:J,codeChange:W,oj:U,onLanguageChange:Y}=e,Z=j(),{id:A=""}=c(),K=s.exports.useRef(),[Q,X]=s.exports.useState(!1),[ee,te]=s.exports.useState(!1),[ae,se]=s.exports.useState(!1),[ne,oe]=s.exports.useState(""),[le,re]=d(h),[ie,ce]=d(u),[de,he]=d(f),[ue,fe]=s.exports.useState([de,de]),[pe,me]=s.exports.useState(""),[ge,xe]=s.exports.useState(),[ye,ve]=d(p),[Ce,be]=s.exports.useState(!1),{token:ke}=a.useToken(),Ne=m(g),[we,Se]=s.exports.useState(!1);s.exports.useEffect((()=>{}),[de]);const je=s.exports.useMemo((()=>O[`${null==U?void 0:U.toLowerCase()}_languageList`]||O.defaultLanguageList),[U]),Le=e=>{if(!K.current||!Z)return;const t=K.current,a=t.getSelection(),s=null==a?void 0:a.endLineNumber,n=t.getModel(),o=null==n?void 0:n.getLineCount(),l=s?s+1:o?o-1:1;null==n||n.applyEdits([{range:new Z.Range(l,1,l,1),text:e}])};return n(x,{children:[n("div",{style:{height:`${i}px`},children:[n("div",{className:"h-12 p-2 flex items-center",style:{backgroundColor:ke.colorPrimaryBg},children:[o(H,{style:{minWidth:"max-content"},dropdownStyle:{minWidth:"max-content"},variant:"borderless",defaultValue:de,options:je,onChange:e=>{he(e),Y&&Y(e)}}),o("div",{className:"grow"}),n(y,{children:[o(v,{type:"text",className:"flex items-center",icon:o(l,{href:"chexiao",size:2}),onClick:()=>{}}),o(v,{type:"text",className:"flex items-center",icon:o(l,{href:"huifu",size:2})}),o(P,{disabled:Ce,arrow:!0,menu:{items:[{key:"note",label:"生成注释",onClick:()=>{(async()=>{try{be(!0);const e=(await z(de,I)).data.data.res;W(e)}finally{be(!1)}})()}},{key:"code",label:"生成代码",onClick:()=>{(async()=>{if(ne)try{be(!0);const e=(await M(de,ne)).data.data.res;Le(e)}finally{be(!1)}else Ne&&Ne.warning({message:"请选择源文本",duration:1})})()}},{key:"exchange",label:"代码转换",onClick:()=>{te(!0)}},{key:"comment",label:"代码编写意见",onClick:()=>{(async()=>{try{be(!0);const e=await G(A);if(200===e.data.code){const t={problem:e.data.data.problem,code:I},a=(await E(de,t)).data.data;xe(a),se(!0)}}finally{be(!1)}})()}}]},children:o(v,{icon:Ce?o(C,{}):o(l,{href:"chatGPT",size:2}),type:"text",className:"flex items-center",disabled:Ce})}),o(v,{icon:o(l,{href:"#icon-"+("light"===ye?"light":"vs-dark"),size:2,color:""+("light"===ye?"#fff":"#000")}),type:"text",className:"flex items-center",onClick:()=>{ve((e=>"vs-dark"===e?"light":"vs-dark"))}}),o(v,{icon:o(l,{href:"#icon-setting",size:2}),type:"text",className:"flex items-center",onClick:()=>X(!0)})]})]}),o(L,{value:I,height:i-42+"px",width:"100%",className:`${J} bg-white`,language:b.includes(de)?"cpp":T.get(de),theme:ye,loading:o(r,{}),onChange:e=>W(e),options:ie,onMount:(e,t)=>{K.current=e,e.onDidChangeCursorSelection((t=>{var a;const s=null==(a=e.getModel())?void 0:a.getValueInRange(t.selection);s&&oe(s)}))}})]}),o($,{title:o("p",{children:"代码编辑器配置"}),open:Q,onCancel:()=>X(!1),afterClose:()=>(()=>{let e={...le,monaco_options:JSON.stringify(ie)};de&&(e={...e,language:de}),ye&&(e={...e,monaco_theme:ye}),k(JSON.stringify(e)).then((async e=>{if(200===e.data.code){const e=await N();re(e.data.data.user)}}))})(),footer:[],centered:!0,children:o("div",{style:{maxHeight:"50vh",overflowY:"scroll"},children:o(_,{monacoOptions:ie,setMonacoOptions:ce})})}),o($,{title:"代码转换",width:"80vw",open:ee,onCancel:()=>{te(!1)},afterClose:()=>{me("")},maskClosable:!1,footer:[o(v,{type:"primary",onClick:()=>te(!1),children:"取消"},1),o(v,{type:"primary",onClick:async()=>{try{be(!0);const e=(await R(ue[0],ue[1],I)).data.data.res;if(me(e),e){w.copyToClipboard(e)&&Ne&&Ne.success({message:"已将转换结果复制到剪切板",duration:1})}}finally{be(!1)}},loading:Ce,children:"开始转换"},2)],centered:!0,children:n("div",{children:[n(y,{size:"large",align:"center",className:"justify-center flex",children:[o(H,{size:"large",options:V,defaultValue:de,onChange:e=>fe((t=>[e,t[1]]))}),n("span",{className:"flex flex-col",children:[o(B,{}),o(B,{})]}),o(H,{size:"large",options:V,defaultValue:de,onChange:e=>fe((t=>[t[0],e]))})]}),n("div",{style:{maxHeight:"400px",overflow:"scroll"},children:[o("h4",{children:"源代码"}),o(q,{code:I})]}),pe&&n("div",{style:{maxHeight:"400px",overflow:"scroll"},children:[o("h4",{children:"目标代码"}),o(q,{code:pe})]})]})}),n($,{title:"代码编写意见",open:ae,onCancel:()=>se(!1),footer:[],width:"80vw",centered:!0,children:[n("div",{children:[o(D,{style:{padding:"2rem 1rem"},title:(null==ge?void 0:ge.res)||"",status:null==(t=S.find((e=>e.value===(null==ge?void 0:ge.res))))?void 0:t.state}),o(q,{code:(null==ge?void 0:ge.description)||""})]}),n("div",{children:[o(F,{checkedChildren:"收起",unCheckedChildren:"查看源代码",defaultChecked:!1,onChange:e=>Se(e)}),we&&o(q,{code:I})]})]})]})};export{U as C,W as R,J as c};
