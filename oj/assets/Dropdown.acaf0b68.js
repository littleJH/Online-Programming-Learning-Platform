import{_ as e,aP as o,z as t,I as n,j as r,F as i,a,w as s,bj as l,N as f,y as c,v as u,O as p,L as v}from"./index.5c064301.js";var d=t.ESC,m=t.TAB;var g=e.exports.forwardRef((function(o,t){var f=o.overlay,c=o.arrow,u=o.prefixCls,p=e.exports.useMemo((function(){return"function"==typeof f?f():f}),[f]),v=n(t,null==p?void 0:p.ref);return r(i,{children:[c&&a("div",{className:"".concat(u,"-arrow")}),s.cloneElement(p,{ref:l(p)?v:void 0})]})})),w={adjustX:1,adjustY:1},h=[0,0],b={topLeft:{points:["bl","tl"],overflow:w,offset:[0,-4],targetOffset:h},top:{points:["bc","tc"],overflow:w,offset:[0,-4],targetOffset:h},topRight:{points:["br","tr"],overflow:w,offset:[0,-4],targetOffset:h},bottomLeft:{points:["tl","bl"],overflow:w,offset:[0,4],targetOffset:h},bottom:{points:["tc","bc"],overflow:w,offset:[0,4],targetOffset:h},bottomRight:{points:["tr","br"],overflow:w,offset:[0,4],targetOffset:h}},y=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus","overlay","children","onVisibleChange"];function C(t,r){var i,w=t.arrow,h=void 0!==w&&w,C=t.prefixCls,x=void 0===C?"rc-dropdown":C,R=t.transitionName,N=t.animation,O=t.align,A=t.placement,P=void 0===A?"bottomLeft":A,k=t.placements,E=void 0===k?b:k,L=t.getPopupContainer,V=t.showAction,j=t.hideAction,F=t.overlayClassName,S=t.overlayStyle,M=t.visible,T=t.trigger,W=void 0===T?["hover"]:T,D=t.autoFocus,I=t.overlay,z=t.children,B=t.onVisibleChange,H=f(t,y),X=s.useState(),Y=c(X,2),_=Y[0],q=Y[1],G="visible"in t?M:_,J=s.useRef(null),K=s.useRef(null),Q=s.useRef(null);s.useImperativeHandle(r,(function(){return J.current}));var U=function(e){q(e),null==B||B(e)};!function(t){var n=t.visible,r=t.triggerRef,i=t.onVisibleChange,a=t.autoFocus,s=t.overlayRef,l=e.exports.useRef(!1),f=function(){var e,o;n&&(null===(e=r.current)||void 0===e||null===(o=e.focus)||void 0===o||o.call(e),null==i||i(!1))},c=function(){var e;return!(null===(e=s.current)||void 0===e||!e.focus||(s.current.focus(),l.current=!0,0))},u=function(e){switch(e.keyCode){case d:f();break;case m:var o=!1;l.current||(o=c()),o?e.preventDefault():f()}};e.exports.useEffect((function(){return n?(window.addEventListener("keydown",u),a&&o(c,3),function(){window.removeEventListener("keydown",u),l.current=!1}):function(){l.current=!1}}),[n])}({visible:G,triggerRef:Q,onVisibleChange:U,autoFocus:D,overlayRef:K});var Z,$,ee,oe=function(){return a(g,{ref:K,overlay:I,prefixCls:x,arrow:h})},te=s.cloneElement(z,{className:u(null===(i=z.props)||void 0===i?void 0:i.className,G&&(Z=t.openClassName,void 0!==Z?Z:"".concat(x,"-open"))),ref:l(z)?n(Q,z.ref):void 0}),ne=j;return ne||-1===W.indexOf("contextMenu")||(ne=["click"]),a(p,{builtinPlacements:E,...H,prefixCls:x,ref:J,popupClassName:u(F,v({},"".concat(x,"-show-arrow"),h)),popupStyle:S,action:W,showAction:V,hideAction:ne,popupPlacement:P,popupAlign:O,popupTransitionName:R,popupAnimation:N,popupVisible:G,stretch:($=t.minOverlayWidthMatchTrigger,ee=t.alignPoint,("minOverlayWidthMatchTrigger"in t?$:!ee)?"minWidth":""),popup:"function"==typeof I?oe:oe(),onPopupVisibleChange:U,onPopupClick:function(e){var o=t.onOverlayClick;q(!1),o&&o(e)},getPopupContainer:L,children:te})}const x=s.forwardRef(C);export{x as D};
